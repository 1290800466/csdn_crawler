<!DOCTYPE html>
            <html>
              <head>
                <meta http-equiv="content-type" content="text/html; charset=utf-8">
                <meta http-equiv="X-UA-Compatible" content="IE=Edge">
                <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
                <meta name="apple-mobile-web-app-status-bar-style" content="black">

                <meta http-equiv="Cache-Control" content="no-siteapp" /><link rel="alternate" media="handheld" href="#" />

                <title></title>
              </head>
              <body><div class="skin_detail" id="article_content">&#13;
                        &#13;
<p>在php里边，redis就是一个功能类，该类中有许多成员方法（名字基本与redis指令的名字一致，参数也一致）。</p>&#13;
<p>实例：</p>&#13;
<p/>&#13;
<pre code_snippet_id="1697934" snippet_file_name="blog_20160526_1_3010122" name="code" class="php">&lt;?php
   $redis = new Redis();
   //连接本地的 Redis 服务
   $redis-&gt;connect('127.0.0.1', 6379);
   //选择redis数据库
   $redis-&gt;select(1);
   //设置 redis 字符串数据
   $redis-&gt;set("name", "wml");
   // 获取存储的字符串数据并输出
   echo "name in redis:: " . $redis-&gt;get("name");
?&gt;</pre>&#13;
<p><br/></p>&#13;
<p>转自：<a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html">http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html</a></p>&#13;
<p>&#13;
</p><table border="1" cellspacing="1" cellpadding="1"><caption>redis常用方法</caption>&#13;
<tbody><tr><td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>Key</strong></span></td>&#13;
<td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>String</strong></span></td>&#13;
<td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>Hash</strong></span></td>&#13;
<td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>List</strong></span></td>&#13;
<td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>Set</strong></span></td>&#13;
</tr><tr><td><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_del" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">键(Key)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_del" style="margin:0px; padding:0px; color:black">DEL</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_keys" style="margin:0px; padding:0px; color:black">KEYS</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_RANDOMKEY" style="margin:0px; padding:0px; color:black">RANDOMKEY</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_TTL" style="margin:0px; padding:0px; color:black">TTL</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_EXISTS" style="margin:0px; padding:0px; color:black">EXISTS</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_move" style="margin:0px; padding:0px; color:black">MOVE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_RENAME" style="margin:0px; padding:0px; color:black">RENAME</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_RENAMENX" style="margin:0px; padding:0px; color:black">RENAMENX</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_TYPE" style="margin:0px; padding:0px; color:black">TYPE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_EXPIRE" style="margin:0px; padding:0px; color:black">EXPIRE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_EXPIREAT" style="margin:0px; padding:0px; color:black">EXPIREAT</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_OBJECT" style="margin:0px; padding:0px; color:black">OBJECT</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_PERSIST" style="margin:0px; padding:0px; color:black">PERSIST</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_SORT" style="margin:0px; padding:0px; color:black">SORT</a></li></ul></td>&#13;
<td><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#STRING" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">字符串(String)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SET" style="margin:0px; padding:0px; color:black">SET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETEX" style="margin:0px; padding:0px; color:black">SETEX</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETRANGE" style="margin:0px; padding:0px; color:black">SETRANGE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_MSET" style="margin:0px; padding:0px; color:black">MSET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_MSETNX" style="margin:0px; padding:0px; color:black">MSETNX</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_APPEND" style="margin:0px; padding:0px; color:black">APPEND</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_GET" style="margin:0px; padding:0px; color:black">GET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_MGET" style="margin:0px; padding:0px; color:black">MGET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_GETRANGE" style="margin:0px; padding:0px; color:black">GETRANGE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_GETSET" style="margin:0px; padding:0px; color:black">GETSET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_STRLEN" style="margin:0px; padding:0px; color:black">STRLEN</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_INCR" style="margin:0px; padding:0px; color:black">INCR</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_INCRBY" style="margin:0px; padding:0px; color:black">INCRBY</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_DECR" style="margin:0px; padding:0px; color:black">DECR</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_DECRBY" style="margin:0px; padding:0px; color:black">DECRBY</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETBIT" style="margin:0px; padding:0px; color:black">SETBIT</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_GETBIT" style="margin:0px; padding:0px; color:black">GETBIT</a></li></ul></td>&#13;
<td><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">哈希表(Hash)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HSET" style="margin:0px; padding:0px; color:black">HSET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HSETNX" style="margin:0px; padding:0px; color:black">HSETNX</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HMSET" style="margin:0px; padding:0px; color:black">HMSET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HGET" style="margin:0px; padding:0px; color:black">HGET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HMGET" style="margin:0px; padding:0px; color:black">HMGET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HGETALL" style="margin:0px; padding:0px; color:black">HGETALL</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HDEL" style="margin:0px; padding:0px; color:black">HDEL</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HLEN" style="margin:0px; padding:0px; color:black">HLEN</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HEXISTS" style="margin:0px; padding:0px; color:black">HEXISTS</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HINCRBY" style="margin:0px; padding:0px; color:black">HINCRBY</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HKEYS" style="margin:0px; padding:0px; color:black">HKEYS</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HVALS" style="margin:0px; padding:0px; color:black">HVALS</a></li></ul></td>&#13;
<td><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">表(List)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSH" style="margin:0px; padding:0px; color:black">LPUSH</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSHX" style="margin:0px; padding:0px; color:black">LPUSHX</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSH" style="margin:0px; padding:0px; color:black">RPUSH</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSHX" style="margin:0px; padding:0px; color:black">RPUSHX</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPOP" style="margin:0px; padding:0px; color:black">LPOP</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPOP" style="margin:0px; padding:0px; color:black">RPOP</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BRPOP" style="margin:0px; padding:0px; color:black">BRPOP</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LLEN" style="margin:0px; padding:0px; color:black">LLEN</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LRANGE" style="margin:0px; padding:0px; color:black">LRANGE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LREM" style="margin:0px; padding:0px; color:black">LREM</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LSET" style="margin:0px; padding:0px; color:black">LSET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LTRIM" style="margin:0px; padding:0px; color:black">LTRIM</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LINDEX" style="margin:0px; padding:0px; color:black">LINDEX</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LINSERT" style="margin:0px; padding:0px; color:black">LINSERT</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPOPLPUSH" style="margin:0px; padding:0px; color:black">RPOPLPUSH</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BRPOPLPUSH" style="margin:0px; padding:0px; color:black">BRPOPLPUSH</a></li></ul></td>&#13;
<td><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">集合(Set)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SADD" style="margin:0px; padding:0px; color:black">SADD</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SREM" style="margin:0px; padding:0px; color:black">SREM</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SMEMBERS" style="margin:0px; padding:0px; color:black">SMEMBERS</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SISMEMBER" style="margin:0px; padding:0px; color:black">SISMEMBER</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SCARD" style="margin:0px; padding:0px; color:black">SCARD</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SMOVE" style="margin:0px; padding:0px; color:black">SMOVE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SPOP" style="margin:0px; padding:0px; color:black">SPOP</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SRANDMEMBER" style="margin:0px; padding:0px; color:black">SRANDMEMBER</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SINTER" style="margin:0px; padding:0px; color:black">SINTER</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SINTERSTORE" style="margin:0px; padding:0px; color:black">SINTERSTORE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SUNION" style="margin:0px; padding:0px; color:black">SUNION</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SUNIONSTORE" style="margin:0px; padding:0px; color:black">SUNIONSTORE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SDIFF" style="margin:0px; padding:0px; color:black">SDIFF</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SDIFFSTORE" style="margin:0px; padding:0px; color:black">SDIFFSTORE</a></li></ul></td>&#13;
</tr><tr><td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>Sorted Set</strong></span></td>&#13;
<td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>Pub/Sub</strong></span></td>&#13;
<td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>Transaction</strong></span></td>&#13;
<td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>Connection</strong></span></td>&#13;
<td><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><strong>Server</strong></span></td>&#13;
</tr><tr><td><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#Sorted-Set" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">有序集(Sorted&#13;
 Set)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZADD" style="margin:0px; padding:0px; color:black">ZADD</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREM" style="margin:0px; padding:0px; color:black">ZREM</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZCARD" style="margin:0px; padding:0px; color:black">ZCARD</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZCOUNT" style="margin:0px; padding:0px; color:black">ZCOUNT</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZSCORE" style="margin:0px; padding:0px; color:black">ZSCORE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZINCRBY" style="margin:0px; padding:0px; color:black">ZINCRBY</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZRANGE" style="margin:0px; padding:0px; color:black">ZRANGE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREVRANGE" style="margin:0px; padding:0px; color:black">ZREVRANGE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZRANGEBYSCORE" style="margin:0px; padding:0px; color:black">ZRANGEBYSCORE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREVRANGEBYSCORE" style="margin:0px; padding:0px; color:black">ZREVRANGEBYSCORE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZRANK" style="margin:0px; padding:0px; color:black">ZRANK</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREVRANK" style="margin:0px; padding:0px; color:black">ZREVRANK</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREMRANGEBYRANK" style="margin:0px; padding:0px; color:black">ZREMRANGEBYRANK</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREMRANGEBYSCORE" style="margin:0px; padding:0px; color:black">ZREMRANGEBYSCORE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZINTERSTORE" style="margin:0px; padding:0px; color:black">ZINTERSTORE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZUNIONSTORE" style="margin:0px; padding:0px; color:black">ZUNIONSTORE</a></li></ul></td>&#13;
<td><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#pub_sub" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">发布/订阅(Pub/Sub)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#ps_PUBLISH" style="margin:0px; padding:0px; color:black">PUBLISH</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#ps_SUBSCRIBE" style="margin:0px; padding:0px; color:black">SUBSCRIBE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#ps_PSUBSCRIBE" style="margin:0px; padding:0px; color:black">PSUBSCRIBE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#ps_UNSUBSCRIBE" style="margin:0px; padding:0px; color:black">UNSUBSCRIBE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#ps_PUNSUBSCRIBE" style="margin:0px; padding:0px; color:black">PUNSUBSCRIBE</a></li></ul></td>&#13;
<td><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#Transaction" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">事务(Transaction)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_WATCH" style="margin:0px; padding:0px; color:black">WATCH</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_UNWATCH" style="margin:0px; padding:0px; color:black">UNWATCH</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_MULTI" style="margin:0px; padding:0px; color:black">MULTI</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_EXEC" style="margin:0px; padding:0px; color:black">EXEC</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_DISCARD" style="margin:0px; padding:0px; color:black">DISCARD</a></li></ul></td>&#13;
<td><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#Connection" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">连接(Connection)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#conn_AUTH" style="margin:0px; padding:0px; color:black">AUTH</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#conn_PING" style="margin:0px; padding:0px; color:black">PING</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#conn_SELECT" style="margin:0px; padding:0px; color:black">SELECT</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#conn_ECHO" style="margin:0px; padding:0px; color:black">ECHO</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#conn_QUIT" style="margin:0px; padding:0px; color:black">QUIT</a></li></ul></td>&#13;
<td><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#Server" style="margin:0px; padding:0px; color:black; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">服务器(Server)</a><span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"/>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px"><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_BGREWRITEAOF" style="margin:0px; padding:0px; color:black">BGREWRITEAOF</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_BGSAVE" style="margin:0px; padding:0px; color:black">BGSAVE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SAVE" style="margin:0px; padding:0px; color:black">SAVE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_LASTSAVE" style="margin:0px; padding:0px; color:black">LASTSAVE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_DBSIZE" style="margin:0px; padding:0px; color:black">DBSIZE</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SLAVEOF" style="margin:0px; padding:0px; color:black">SLAVEOF</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_FLUSHALL" style="margin:0px; padding:0px; color:black">FLUSHALL</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_FLUSHDB" style="margin:0px; padding:0px; color:black">FLUSHDB</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SHUTDOWN" style="margin:0px; padding:0px; color:black">SHUTDOWN</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SLOWLOG" style="margin:0px; padding:0px; color:black">SLOWLOG</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_INFO" style="margin:0px; padding:0px; color:black">INFO</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_CONFIG-GET" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 GET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#scr_CONFIG-SET" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 SET</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#scr_CONFIG-RESETSTAT" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 RESETSTAT</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#scr_DEBUG-OBJECT" style="margin:0px; padding:0px; color:black">DEBUG&#13;
 OBJECT</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_DEBUG-SEGFAULT" style="margin:0px; padding:0px; color:black">DEBUG&#13;
 SEGFAULT</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_MONITOR" style="margin:0px; padding:0px; color:black">MONITOR</a></li><li class="toctree-l2" style="margin:0px 0px 1em; padding:0px; list-style:disc"><a target="_blank" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SYNC" style="margin:0px; padding:0px; color:black">SYNC</a></li></ul></td>&#13;
</tr></tbody></table><br/><p><br/></p>&#13;
<p/>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
phpredis是redis的php的一个扩展，效率是相当高有链表排序功能，对创建内存级的模块业务关系</p>&#13;
<div id="post_content" style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">很有用;以下是redis官方提供的命令使用技巧:</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">下载地址如下：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">https://github.com/owlient/phpredis（支持redis 2.0.4）</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">Redis::__construct构造函数<br style="margin:0px; padding:0px"/>&#13;
$redis = new Redis();</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)">connect</span>, open 链接redis服务<br style="margin:0px; padding:0px"/>&#13;
参数<br style="margin:0px; padding:0px"/>&#13;
host: string，服务地址<br style="margin:0px; padding:0px"/>&#13;
port: int,端口号<br style="margin:0px; padding:0px"/>&#13;
timeout: float,链接时长 (可选, 默认为 0 ，不限链接时间)<br style="margin:0px; padding:0px"/>&#13;
注: 在redis.conf中也有时间，默认为300</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)">pconnect</span>, popen 不会主动关闭的链接<br style="margin:0px; padding:0px"/>&#13;
参考上面</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">setOption 设置redis模式</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">getOption 查看redis设置的模式</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)">ping</span> 查看连接状态</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">KEY相关操作</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px"><a target="_blank" name="key_del" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">DEL</span></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">移除给定的一个或多个<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，则忽略该命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为要移除的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的数量。</div>&#13;
</div>&#13;
<div class="last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">移除单个字符串类型的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>，时间复杂度为O(1)。</div>&#13;
<div class="line" style="margin:0px; padding:0px">移除单个列表、集合、有序集合或哈希表类型的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>，时间复杂度为O(M)，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为以上数据结构内的元素数量。</div>&#13;
</div>&#13;
</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">被移除<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的数量。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">DEL</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1： 删除单个key</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;set('myname','ikodota');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;get('myname').'&lt;br&gt;'; <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 返回:ikodota</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;del('myname');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 返回 TRUE(1)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;get('myname')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 返回 bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2： 删除一个不存在的key</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">if</span>(!<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;exists('fake_key')) <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 不存在</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;del('fake_key')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 返回 int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况3： 同时删除多个key</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('first_key'=&gt;'first_val',<br style="margin:0px; padding:0px"/>          'second_key'=&gt;'second_val',<br style="margin:0px; padding:0px"/>          'third_key'=&gt;'third_val');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;mset(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset</span>); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">用MSET一次储存多个值</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mget</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('first_key','second_key','third_key');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;mget(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mget</span>)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">一次返回多个值 //array(3) { [0]=&gt; string(9) "first_val" [1]=&gt; string(10) "second_val" [2]=&gt; string(9) "third_val" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px">del</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mget</span>); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">同时删除多个key</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;mget(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mget</span>)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">返回 array(3) { [0]=&gt; bool(false) [1]=&gt; bool(false) [2]=&gt; bool(false) }</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><br style="margin:0px; padding:0px"/></span></p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px"><a target="_blank" name="key_keys" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">KEYS</span></tt></span></dt><dt style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px">KEYS pattern </tt></dt><dt style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px"/>查找符合给定模式的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>。</dt></dl><div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">KEYS</span> <span class="pre" style="margin:0px; padding:0px">*</span></tt>命中数据库中所有<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">KEYS</span> <span class="pre" style="margin:0px; padding:0px">h?llo</span></tt>命中<tt class="docutils literal" style="margin:0px; padding:0px">hello</tt>， <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">hallo</span> <span class="pre" style="margin:0px; padding:0px">and</span> <span class="pre" style="margin:0px; padding:0px">hxllo</span></tt>等。</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">KEYS</span> <span class="pre" style="margin:0px; padding:0px">h*llo</span></tt>命中<tt class="docutils literal" style="margin:0px; padding:0px">hllo</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">heeeeello</tt>等。</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">KEYS</span> <span class="pre" style="margin:0px; padding:0px">h[ae]llo</span></tt>命中<tt class="docutils literal" style="margin:0px; padding:0px">hello</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">hallo</tt>，但不命中<tt class="docutils literal" style="margin:0px; padding:0px">hillo</tt>。</div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">特殊符号用<tt class="docutils literal" style="margin:0px; padding:0px">"\"</tt>隔开</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为数据库中<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">符合给定模式的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>列表。</dd></dl><div class="admonition warning" style="margin:0px; padding:0px">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px; color:rgb(255,0,0)">警告 :<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/key.html#keys" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px; color:rgb(255,0,0)">KEYS</span></a>的速度非常快，但在一个大的数据库中使用它仍然可能造成性能问题，如果你需要从一个数据集中查找特定的<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">key</span></tt>，你最好还是用<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/set.html#set-struct" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><span style="margin:0px; padding:0px">集合(Set)</span></span></a>。</span></p>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">KEYS</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">$redis-&gt;FLUSHALL();</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset_keys</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('one'=&gt;'1',<br style="margin:0px; padding:0px"/>          'two'=&gt;'2',<br style="margin:0px; padding:0px"/>          'three '=&gt;'3',<br style="margin:0px; padding:0px"/>          'four'=&gt;'4');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;mset(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset_keys</span>); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">用MSET一次储存多个值</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;keys('*o*')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(3) { [0]=&gt; string(4) "four" [1]=&gt; string(3) "two" [2]=&gt; string(3) "one" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;keys('t??')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(1) { [0]=&gt; string(3) "two" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;keys('t[w]*')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(1) { [0]=&gt; string(3) "two" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">print_r</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;keys('*')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">Array ( [0] =&gt; four [1] =&gt; three [2] =&gt; two [3] =&gt; one )</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:18pt"><span style="margin:0px; padding:0px"><br style="margin:0px; padding:0px"/></span></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:18pt"><span style="margin:0px; padding:0px"><a target="_blank" name="key_RANDOMKEY" style="margin:0px; padding:0px"/>RANDOMKEY</span></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">从当前数据库中随机返回(不删除)一个<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">当数据库不为空时，返回一个<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当数据库为空时，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil。</tt></div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">RANDOMKEY</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;FLUSHALL();<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：数据库不为空</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset_randomkey</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('fruit'=&gt;'apple',<br style="margin:0px; padding:0px"/>                'drink'=&gt;'beer',<br style="margin:0px; padding:0px"/>                'food'=&gt;'cookis');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;mset(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset_randomkey</span>);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;randomkey(); <br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">print_r</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;keys('*')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 查看数据库内所有key，证明RANDOMKEY并不删除key//Array ( [0] =&gt; food [1] =&gt; drink [2] =&gt; fruit )</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：数据库为空</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;flushdb();  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 删除当前数据库所有key</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt; randomkey()); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(false)</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px"><span style="margin:0px; padding:0px"><a target="_blank" name="key_TTL" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">TTL</span></span><br style="margin:0px; padding:0px"/>&#13;
TTL key</tt></dt></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的剩余生存时间(time to live)(以秒为单位)。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的剩余生存时间(以秒为单位)。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在或没有设置生存时间时，返回<tt class="docutils literal" style="margin:0px; padding:0px">-1</tt> 。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">TTL</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：带TTL的key</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;flushdb();<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">$redis-&gt;set('name','ikodota'); # 设置一个key</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;expire('name',30);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 设置生存时间为30秒 //return (integer) 1</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;get('name'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">return ikodota</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;ttl('name'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 25<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/>//echo $redis-&gt;ttl('name');  # 30秒过去，name过期 //(integer) -1</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;get('name')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 过期的key将被删除 //return bool(false);</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：不带TTL的key</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;set('site','wikipedia.org');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">OK</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;ttl('site'));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(-1)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况3：不存在的key</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('not_exists_key');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TTL('not_exists_key'));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(-1)</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><br style="margin:0px; padding:0px"/></span></p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px"><a target="_blank" name="key_EXISTS" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">EXISTS</span></tt></span></dt><dt style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px">EXISTS key</tt></dt></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">检查给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>是否存在。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">若<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>，否则返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">EXISTS</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;EXISTS&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;set('db',"redis"); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(true) </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;exists('db'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> key存在 //bool(true) </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;del('db');   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 删除key //int(1)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;exists('db'))  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> key不存在 //bool(false)</span></pre>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><br style="margin:0px; padding:0px"/></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px"><a target="_blank" name="key_move" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">MOVE</span></span><br style="margin:0px; padding:0px"/>&#13;
MOVE key db</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将当前数据库(默认为<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>)的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>移动到给定的数据库<tt class="docutils literal" style="margin:0px; padding:0px">db</tt>当中。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果当前数据库(源数据库)和给定数据库(目标数据库)有相同名字的给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>，或者<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在于当前数据库，那么<tt class="docutils literal" style="margin:0px; padding:0px">MOVE</tt>没有任何效果。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">因此，也可以利用这一特性，将<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_move" style="margin:0px; padding:0px; color:black">MOVE</a>当作锁(locking)原语。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">移动成功返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>，失败则返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">MOVE</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;MOVE&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1： key存在于当前数据库</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SELECT(0);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> redis默认使用数据库0，为了清晰起见，这里再显式指定一次。//OK</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('song',"secret base - Zone"); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">OK</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span> (<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MOVE('song',1));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 将song移动到数据库1 //bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：当key不存在的时候</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SELECT(1);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span> (<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('fake_key'));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(false);</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MOVE('fake_key', 0));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 试图从数据库1移动一个不存在的key到数据库0，失败) //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SELECT(0); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 使用数据库0</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('fake_key'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 证实fake_key不存在 //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况3：当源数据库和目标数据库有相同的key时</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SELECT(0);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 使用数据库0</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('favorite_fruit',"banana");<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SELECT(1);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 使用数据库1</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('favorite_fruit',"apple");<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SELECT(0);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 使用数据库0，并试图将favorite_fruit移动到数据库1</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MOVE('favorite_fruit',1));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 因为两个数据库有相同的key，MOVE失败 //return bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('favorite_fruit');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 数据库0的favorite_fruit没变 //return banana</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SELECT(1);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('favorite_fruit');   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 数据库1的favorite_fruit也是 //return apple</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px"><br style="margin:0px; padding:0px"/></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px"><a target="_blank" name="key_RENAME" style="margin:0px; padding:0px"/>RENAME</span> </p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">RENAME key newkey</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>改名为<tt class="docutils literal" style="margin:0px; padding:0px">newkey</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">newkey</tt>相同或者<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回一个错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">newkey</tt>已经存在时，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_RENAME" style="margin:0px; padding:0px; color:black">RENAME</a>命令将覆盖旧值。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">改名成功时提示<tt class="docutils literal" style="margin:0px; padding:0px">OK</tt>，失败时候返回一个错误。</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">RENAME</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;RENAME&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：key存在且newkey不存在</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('message',"hello world");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">RENAME</span>('message','greeting'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('message'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> message不复存在 //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('greeting'));   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> greeting取而代之 //bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：当key不存在时，返回错误 ,php返回false;</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">RENAME</span>('fake_key','never_exists'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况3：newkey已存在时，RENAME会覆盖旧newkey</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('pc',"lenovo");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('personal_computer',"dell"); <br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">RENAME</span>('pc','personal_computer')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('pc')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(nil)   bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('personal_computer'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> dell“没有”了 //string(6) "lenovo"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px"><a target="_blank" name="key_RENAMENX" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">RENAMENX </span></tt></span></dt><dt style="margin:0px; padding:0px"/></dl><dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">RENAMENX key newkey</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当且仅当<tt class="docutils literal" style="margin:0px; padding:0px">newkey</tt>不存在时，将<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>改为<tt class="docutils literal" style="margin:0px; padding:0px">newkey</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">出错的情况和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_RENAME" style="margin:0px; padding:0px; color:black">RENAME</a>一样(<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时报错)。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">修改成功时，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">newkey</tt>已经存在，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">RENAMENX</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;RENAMENX&lt;br&gt;';<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：newkey不存在，成功</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('player',"MPlyaer");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('best_player'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;RENAMENX('player','best_player')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> bool(true) </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：newkey存在时，失败</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('animal',"bear");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('favorite_animal', "butterfly");<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;RENAMENX('animal', 'favorite_animal'));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;get('animal')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(4) "bear"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;get('favorite_animal')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(9) "butterfly"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/></dt><dt style="margin:0px; padding:0px"/><dt style="margin:0px; padding:0px"/></dl><dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px"><a target="_blank" name="key_TYPE" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">TYPE</span></tt></span></dt><dt style="margin:0px; padding:0px"><tt style="margin:0px; padding:0px">TYPE key</tt></dt></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>所储存的值的类型。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">none</tt>(key不存在) int(0)</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">string</tt>(字符串) int(1)</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">list</tt>(列表) int(3)</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">set</tt>(集合) int(2)</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">zset</tt>(有序集) int(4)</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">hash</tt>(哈希表) int(5)</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">TYPE</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;flushALL();<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;TYPE&lt;br&gt;';<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TYPE('fake_key')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">none /int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('weather',"sunny");  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 构建一个字符串</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TYPE('weather'));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string / int(1)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SADD('pat',"dog");  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 构建一个集合</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TYPE('pat')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">set /int(2)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('book_list',"programming in scala");  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 构建一个列表</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TYPE('book_list'));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">list / int(3) </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;ZADD('pats',1,'cat');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 构建一个zset (sorted set) // int(1)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;ZADD('pats',2,'dog');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;ZADD('pats',3,'pig');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;zRange('pats',0,-1)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> array(3) { [0]=&gt; string(3) "cat" [1]=&gt; string(3) "dog" [2]=&gt; string(3) "pig" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TYPE('pats')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">zset / int(4)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;HSET('website','google','www.g.cn');   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 一个新域</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;HGET('website','google')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(8) "www.g.cn"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TYPE('website')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">hash /int(5)</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px"><a target="_blank" name="key_EXPIRE" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">EXPIRE</span></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">EXPIRE key seconds<span style="margin:0px; padding:0px; color:rgb(255,0,0)"><br style="margin:0px; padding:0px"/></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">为给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>设置生存时间。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>过期时，它会被自动删除。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">在Redis中，带有生存时间的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>被称作“易失的”(volatile)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">在低于2.1.3版本的Redis中，已存在的生存时间不可覆盖。</div>&#13;
<div class="line" style="margin:0px; padding:0px">从2.1.3版本开始，<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的生存时间可以被更新，也可以被<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_PERSIST" style="margin:0px; padding:0px; color:black">PERSIST</a>命令移除。(详情参见 <a target="_blank" class="reference external" href="http://redis.io/topics/expire" style="margin:0px; padding:0px; color:black">http://redis.io/topics/expire</a>)。</div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">设置成功返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在或者不能为<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>设置生存时间时(比如在低于2.1.3中你尝试更新<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的生存时间)，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">EXPIRE</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;select(7);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">$redis-&gt;flushdb();</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;EXPIRE&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('cache_page',"www.cnblogs.com/ikodota");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXPIRE('cache_page', 30);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 设置30秒后过期</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">sleep</span>(6);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TTL('cache_page').'&lt;br&gt;';   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 查看给定key的剩余生存时间 //(integer) 24</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXPIRE('cache_page', 3000);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 更新生存时间，3000秒</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">sleep</span>(4);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TTL('cache_page').'&lt;br&gt;';   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 2996</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><br style="margin:0px; padding:0px"/></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px"><a target="_blank" name="key_EXPIREAT" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">EXPIREAT </span></tt></span></dt><dt style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px">EXPIREAT key timestamp</tt></dt></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_EXPIREAT" style="margin:0px; padding:0px; color:black">EXPIREAT</a>的作用和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_EXPIRE" style="margin:0px; padding:0px; color:black">EXPIRE</a>一样，都用于为<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>设置生存时间。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">不同在于<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_EXPIREAT" style="margin:0px; padding:0px; color:black">EXPIREAT</a>命令接受的时间参数是<span style="margin:0px; padding:0px">UNIX时间戳</span>(unix&#13;
 timestamp)。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果生存时间设置成功，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在或没办法设置生存时间，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">EXPIREAT</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;EXPIREAT&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('cache','www.google.com');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXPIREAT('cache','1355292000'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 这个key将在2012.12.12过期</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> (<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TTL('cache')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">return 124345085</span></pre>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><br style="margin:0px; padding:0px"/></span></p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px"><a target="_blank" name="key_OBJECT" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">OBJECT </span></tt></span></dt><dt style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px">OBJECT subcommand [arguments [arguments]]</tt></dt></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_OBJECT" style="margin:0px; padding:0px; color:black">OBJECT</a>命令允许从内部察看给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的Redis对象。</p>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">它通常用在除错(debugging)或者了解为了节省空间而对<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>使用特殊编码的情况。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当将Redis用作缓存程序时，你也可以通过<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_OBJECT" style="margin:0px; padding:0px; color:black">OBJECT</a>命令中的信息，决定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的驱逐策略(eviction&#13;
 policies)。</div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">OBJECT命令有多个子命令：</p>&#13;
<ul class="simple" style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">OBJECT</span> <span class="pre" style="margin:0px; padding:0px">REFCOUNT</span> <span class="pre" style="margin:0px; padding:0px">&lt;key&gt;</span></tt>返回给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>引用所储存的值的次数。此命令主要用于除错。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">OBJECT</span> <span class="pre" style="margin:0px; padding:0px">ENCODING</span> <span class="pre" style="margin:0px; padding:0px">&lt;key&gt;</span></tt>返回给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>锁储存的值所使用的内部表示(representation)。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">OBJECT</span> <span class="pre" style="margin:0px; padding:0px">IDLETIME</span> <span class="pre" style="margin:0px; padding:0px">&lt;key&gt;</span></tt>返回给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>自储存以来的空转时间(idle，&#13;
 没有被读取也没有被写入)，以秒为单位。</li></ul><div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">对象可以以多种方式编码：</div>&#13;
</div>&#13;
<ul class="simple" style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc">字符串可以被编码为<tt class="docutils literal" style="margin:0px; padding:0px">raw</tt>(一般字符串)或<tt class="docutils literal" style="margin:0px; padding:0px">int</tt>(用字符串表示64位数字是为了节约空间)。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">列表可以被编码为<tt class="docutils literal" style="margin:0px; padding:0px">ziplist</tt>或<tt class="docutils literal" style="margin:0px; padding:0px">linkedlist</tt>。<tt class="docutils literal" style="margin:0px; padding:0px">ziplist</tt>是为节约大小较小的列表空间而作的特殊表示。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">集合可以被编码为<tt class="docutils literal" style="margin:0px; padding:0px">intset</tt>或者<tt class="docutils literal" style="margin:0px; padding:0px">hashtable</tt>。<tt class="docutils literal" style="margin:0px; padding:0px">intset</tt>是只储存数字的小集合的特殊表示。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">哈希表可以编码为<tt class="docutils literal" style="margin:0px; padding:0px">zipmap</tt>或者<tt class="docutils literal" style="margin:0px; padding:0px">hashtable</tt>。<tt class="docutils literal" style="margin:0px; padding:0px">zipmap</tt>是小哈希表的特殊表示。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">有序集合可以被编码为<tt class="docutils literal" style="margin:0px; padding:0px">ziplist</tt>或者<tt class="docutils literal" style="margin:0px; padding:0px">skiplist</tt>格式。<tt class="docutils literal" style="margin:0px; padding:0px">ziplist</tt>用于表示小的有序集合，而<tt class="docutils literal" style="margin:0px; padding:0px">skiplist</tt>则用于表示任何大小的有序集合。</li></ul><div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">假如你做了什么让Redis没办法再使用节省空间的编码时(比如将一个只有1个元素的集合扩展为一个有100万个元素的集合)，特殊编码类型(specially encoded types)会自动转换成通用类型(general type)。</div>&#13;
</div>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">REFCOUNT</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">IDLETIME</tt>返回数字。</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">ENCODING</tt>返回相应的编码类型。</div>&#13;
</div>&#13;
</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">OBJECT</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;select(8);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;OBJECT&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('game',"WOW");  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 设置一个字符串</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">OBJECT</span>('REFCOUNT','game');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 只有一个引用<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/>//sleep(5);</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">OBJECT</span>('IDLETIME','game');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 等待一阵。。。然后查看空转时间 //(integer) 10<br style="margin:0px; padding:0px"/>//echo $redis-&gt;GET('game');  # 提取game， 让它处于活跃(active)状态  //return WOW<br style="margin:0px; padding:0px"/>//echo $redis-&gt;OBJECT('IDLETIME','game');  # 不再处于空转 //(integer) 0</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">OBJECT</span>('ENCODING','game'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 字符串的编码方式 //string(3) "raw"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('phone',15820123123);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 大的数字也被编码为字符串</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">OBJECT</span>('ENCODING','phone')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(3) "raw"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('age',20);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 短数字被编码为int</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">OBJECT</span>('ENCODING','age')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(3) "int"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><br style="margin:0px; padding:0px"/></span></p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px"><a target="_blank" name="key_PERSIST" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">PERSIST </span></tt></span></dt><dt style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px">PERSIST key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">移除给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的生存时间。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">当生存时间移除成功时，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>.</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在或<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>没有设置生存时间，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">PERSIST</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;PERSIST&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('time_to_say_goodbye',"886...");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXPIRE('time_to_say_goodbye', 300);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">sleep</span>(3);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TTL('time_to_say_goodbye'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> (int) 297</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;';<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;PERSIST('time_to_say_goodbye');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 移除生存时间</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TTL('time_to_say_goodbye');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 移除成功  //int(-1)</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px"><a target="_blank" name="key_SORT" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">SORT</span></span></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px">SORT key [<span style="margin:0px; padding:0px; color:rgb(255,0,0)">BY pattern</span>] [<span style="margin:0px; padding:0px; color:rgb(0,0,128)">LIMIT offset count</span>]&#13;
 [<span style="margin:0px; padding:0px; color:rgb(153,51,102)">GET pattern [GET pattern ...]</span>] [<span style="margin:0px; padding:0px; color:rgb(0,128,0)">ASC | DESC</span>] [<span style="margin:0px; padding:0px; color:rgb(255,0,255)">ALPHA</span>] [<span style="margin:0px; padding:0px; color:rgb(0,0,255)">STORE&#13;
 destination</span>]</tt></span></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">排序，分页等<br style="margin:0px; padding:0px"/>&#13;
参数</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">array(<br style="margin:0px; padding:0px"/>&#13;
‘by’ =&gt; ‘some_pattern_*’,<br style="margin:0px; padding:0px"/>&#13;
‘limit’ =&gt; array(0, 1),<br style="margin:0px; padding:0px"/>&#13;
‘get’ =&gt; ‘some_other_pattern_*’ or an array of patterns,<br style="margin:0px; padding:0px"/>&#13;
‘sort’ =&gt; ‘asc’ or ‘desc’,<br style="margin:0px; padding:0px"/>&#13;
‘alpha’ =&gt; TRUE,<br style="margin:0px; padding:0px"/>&#13;
‘store’ =&gt; ‘external-key’<br style="margin:0px; padding:0px"/>&#13;
)</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回或保存给定列表、集合、有序集合<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中经过排序的元素。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">排序默认以数字作为对象，值被解释为双精度浮点数，然后进行比较。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">一般SORT用法</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">最简单的<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_SORT" style="margin:0px; padding:0px; color:black">SORT</a>使用方法是<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SORT</span> <span class="pre" style="margin:0px; padding:0px">key</span></tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">假设<tt class="docutils literal" style="margin:0px; padding:0px">today_cost</tt>是一个保存数字的列表，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_SORT" style="margin:0px; padding:0px; color:black">SORT</a>命令默认会返回该列表值的递增(从小到大)排序结果。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 将数据一一加入到列表中</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('today_cost', 30);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('today_cost', 1.5);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('today_cost', 10);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('today_cost', 8);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 排序</span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('today_cost')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(4) { [0]=&gt; string(3) "1.5" [1]=&gt; string(1) "8" [2]=&gt; string(2) "10" [3]=&gt; string(2) "30" }</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当数据集中保存的是字符串值时，你可以用<tt style="margin:0px; padding:0px">ALPHA</tt>修饰符(modifier)进行排序。</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 将数据一一加入到列表中</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('website', "www.reddit.com");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('website', "www.slashdot.com");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('website', "www.infoq.com");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 默认排序</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('website'));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(3) { [0]=&gt; string(13) "www.infoq.com" [1]=&gt; string(16) "www.slashdot.com" [2]=&gt; string(14) "www.reddit.com" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 按字符排序 ALPHA=true</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('website', <span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('ALPHA'=&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">TRUE</span>))); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(3) { [0]=&gt; string(13) "www.infoq.com" [1]=&gt; string(14) "www.reddit.com" [2]=&gt; string(16) "www.slashdot.com" }</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果你正确设置了<tt class="docutils literal" style="margin:0px; padding:0px">!LC_COLLATE</tt>环境变量的话，Redis能识别<tt class="docutils literal" style="margin:0px; padding:0px">UTF-8</tt>编码。</p>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">排序之后返回的元素数量可以通过<tt class="docutils literal" style="margin:0px; padding:0px">LIMIT</tt>修饰符进行限制。</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">LIMIT</tt>修饰符接受两个参数：<tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">count</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>指定要跳过的元素数量，<tt class="docutils literal" style="margin:0px; padding:0px">count</tt>指定跳过<tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>个指定的元素之后，要返回多少个对象。</div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">以下例子返回排序结果的前5个对象(<tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>为<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>表示没有元素被跳过)。</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 将数据一一加入到列表中</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 30); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 1</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 56); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 2</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 42); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 3</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 22); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 4</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 0);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 5</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 11); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 6</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 32); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 7</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 67); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 8</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 50); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 9</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 44); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 10</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('rank', 55); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 11</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 排序</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('LIMIT'=&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>(0,5));<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('rank',<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>));   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 返回排名前五的元素 // array(5) { [0]=&gt; string(1) "0" [1]=&gt; string(2) "11" [2]=&gt; string(2) "22" [3]=&gt; string(2) "30" [4]=&gt; string(2) "32" }</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">修饰符可以组合使用。以下例子返回降序(从大到小)的前5个对象。</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>(<br style="margin:0px; padding:0px"/>            'LIMIT'=&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>(0,5),<br style="margin:0px; padding:0px"/>            'SORT'=&gt;'DESC'<br style="margin:0px; padding:0px"/>            );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('rank',<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(5) { [0]=&gt; string(2) "67" [1]=&gt; string(2) "56" [2]=&gt; string(2) "55" [3]=&gt; string(2) "50" [4]=&gt; string(2) "44" }</span></pre>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用外部key进行排序</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">有时候你会希望使用外部的key作为权重来比较元素，代替默认的对比方法。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">假设现在有用户(user)数据如下：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">id　　　  name　　　　level<br style="margin:0px; padding:0px"/>&#13;
-------------------------------<br style="margin:0px; padding:0px"/>&#13;
1　　　　admin　　　  9999<br style="margin:0px; padding:0px"/>&#13;
2　　　　huangz　　　10<br style="margin:0px; padding:0px"/>&#13;
59230 　jack 　　　    3<br style="margin:0px; padding:0px"/>&#13;
222 　　 hacker 　　   9999</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">id数据保存在key名为user_id的列表中。<br style="margin:0px; padding:0px"/>&#13;
name数据保存在key名为user_name_{id}的列表中<br style="margin:0px; padding:0px"/>&#13;
level数据保存在user_level_{id}的key中。</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 先将要使用的数据加入到数据库中</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> admin</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('user_id', 1);<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 1</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_name_1', 'admin');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_level_1',9999);<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> huangz</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('user_id', 2);<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 2</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_name_2', 'huangz');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_level_2', 10);<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> jack</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('user_id', 59230);<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 3</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_name_59230','jack');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_level_59230', 3);<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> hacker</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('user_id', 222);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 4</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_name_222', 'hacker');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_level_222', 9999);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果希望按<tt class="docutils literal" style="margin:0px; padding:0px">level</tt>从大到小排序<tt class="docutils literal" style="margin:0px; padding:0px">user_id</tt>，可以使用以下命令：</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('BY'=&gt;'user_level_*',<br style="margin:0px; padding:0px"/>            'SORT'=&gt;'DESC'<br style="margin:0px; padding:0px"/>            );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('user_id',<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(4) { [0]=&gt; string(3) "222" [1]=&gt; string(1) "1" [2]=&gt; string(1) "2" [3]=&gt; string(5) "59230" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">---------------------------</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">1) "222"    # hacker</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">2) "1"      # admin</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">3) "2"      # huangz</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">4) "59230"  # jack</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">但是有时候只是返回相应的<tt class="docutils literal" style="margin:0px; padding:0px">id</tt>没有什么用，你可能更希望排序后返回<tt class="docutils literal" style="margin:0px; padding:0px">id</tt>对应的用户名，这样更友好一点，使用<tt class="docutils literal" style="margin:0px; padding:0px">GET</tt>选项可以做到这一点：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('BY'=&gt;'user_level_*',<br style="margin:0px; padding:0px"/>            'SORT'=&gt;'DESC',<br style="margin:0px; padding:0px"/>            'GET'=&gt;'user_name_*'<br style="margin:0px; padding:0px"/>            );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('user_id', <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(4) { [0]=&gt; string(6) "hacker" [1]=&gt; string(5) "admin" [2]=&gt; string(6) "huangz" [3]=&gt; string(4) "jack" }</span><span style="margin:0px; padding:0px; line-height:1.5!important"><br style="margin:0px; padding:0px"/></span></pre>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">1) "hacker"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">2) "admin"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">3) "huangz"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">4) "jack"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">可以多次地、有序地使用<tt class="docutils literal" style="margin:0px; padding:0px">GET</tt>操作来获取更多外部<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">比如你不但希望获取用户名，还希望连用户的密码也一并列出，可以使用以下命令：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 先添加一些测试数据</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_password_222', "hey,im in");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_password_1', "a_long_long_password");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_password_2', "nobodyknows");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('user_password_59230', "jack201022");<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 获取name和password</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('BY'=&gt;'user_level_*',<br style="margin:0px; padding:0px"/>            'SORT'=&gt;'DESC',<br style="margin:0px; padding:0px"/>            'GET'=&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('user_name_*','user_password_*')<br style="margin:0px; padding:0px"/>            );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('user_id',<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(8) { [0]=&gt; string(6) "hacker" [1]=&gt; string(9) "hey,im in" [2]=&gt; string(5) "admin" [3]=&gt; string(20) "a_long_long_password" [4]=&gt; string(6) "huangz" [5]=&gt; string(11) "nobodyknows" [6]=&gt; string(4) "jack" [7]=&gt; string(10) "jack201022" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">------------------------------------</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">1) "hacker"       # 用户名</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">2) "hey,im in"    # 密码</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">3) "jack"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">4) "jack201022"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">5) "huangz"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">6) "nobodyknows"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">7) "admin"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">8) "a_long_long_password"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word"># 注意GET操作是有序的，GET user_name_* GET user_password_* 和 GET user_password_* GET user_name_*返回的结果位置不同</pre>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 获取name和password 注意GET操作是有序的</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('BY'=&gt;'user_level_*',<br style="margin:0px; padding:0px"/>            'SORT'=&gt;'DESC',<br style="margin:0px; padding:0px"/>            'GET'=&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('<span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5!important">user_password_*</span>','<span style="margin:0px; padding:0px; color:rgb(255,0,0); line-height:1.5!important">user_name_*</span>')<br style="margin:0px; padding:0px"/>            );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('user_id',<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> array(8) { [0]=&gt; string(9) "hey,im in" [1]=&gt; string(6) "hacker" [2]=&gt; string(20) "a_long_long_password" [3]=&gt; string(5) "admin" [4]=&gt; string(11) "nobodyknows" [5]=&gt; string(6) "huangz" [6]=&gt; string(10) "jack201022" [7]=&gt; string(4) "jack" }</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px">GET</tt>还有一个特殊的规则——<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">"GET</span> <span class="pre" style="margin:0px; padding:0px">#"</span></tt>，用于获取被排序对象(我们这里的例子是<tt class="docutils literal" style="margin:0px; padding:0px">user_id</tt>)的当前元素。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">比如你希望<tt class="docutils literal" style="margin:0px; padding:0px">user_id</tt>按<tt class="docutils literal" style="margin:0px; padding:0px">level</tt>排序，还要列出<tt class="docutils literal" style="margin:0px; padding:0px">id</tt>、<tt class="docutils literal" style="margin:0px; padding:0px">name</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">password</tt>，可以使用以下命令：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('BY'=&gt;'user_level_*',<br style="margin:0px; padding:0px"/>            'SORT'=&gt;'DESC',<br style="margin:0px; padding:0px"/>            'GET'=&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('#','user_password_*','user_name_*')<br style="margin:0px; padding:0px"/>            );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('user_id',<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(12) { [0]=&gt; string(3) "222" [1]=&gt; string(9) "hey,im in" [2]=&gt; string(6) "hacker" [3]=&gt; string(1) "1" [4]=&gt; string(20) "a_long_long_password" [5]=&gt; string(5) "admin" [6]=&gt; string(1) "2" [7]=&gt; string(11) "nobodyknows" [8]=&gt; string(6) "huangz" [9]=&gt; string(5) "59230" [10]=&gt; string(10) "jack201022" [11]=&gt; string(4) "jack" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">--------------------------------------------------------------</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">1) "222"          # id</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">2) "hacker"       # name</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">3) "hey,im in"    # password</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">4) "1"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">5) "admin"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">6) "a_long_long_password"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">7) "2"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">8) "huangz"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">9) "nobodyknows"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">10) "59230"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">11) "jack"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">12) "jack201022"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">只获取对象而不排序</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px">BY</tt>修饰符可以将一个不存在的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>当作权重，让<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_SORT" style="margin:0px; padding:0px; color:black">SORT</a>跳过排序操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">该方法用于你希望获取外部对象而又不希望引起排序开销时使用。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 确保fake_key不存在</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('fake_key');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 0</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 以fake_key作BY参数，不排序，只GET name 和 GET password</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('BY'=&gt;'fake_key',<br style="margin:0px; padding:0px"/>            'SORT'=&gt;'DESC',<br style="margin:0px; padding:0px"/>            'GET'=&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('#','user_name_*','user_password_*')<br style="margin:0px; padding:0px"/>            );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('user_id',<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(12) { [0]=&gt; string(3) "222" [1]=&gt; string(6) "hacker" [2]=&gt; string(9) "hey,im in" [3]=&gt; string(5) "59230" [4]=&gt; string(4) "jack" [5]=&gt; string(10) "jack201022" [6]=&gt; string(1) "2" [7]=&gt; string(6) "huangz" [8]=&gt; string(11) "nobodyknows" [9]=&gt; string(1) "1" [10]=&gt; string(5) "admin" [11]=&gt; string(20) "a_long_long_password" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">----------------------------------------------</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">1) "222"        # id</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">2) "hacker"     # user_name</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">3) "hey,im in"  # password</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">4) "59230"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">5) "jack"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">6) "jack201022"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">7) "2"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">8) "huangz"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">9) "nobodyknows"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">10) "1"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">11) "admin"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">12) "a_long_long_password"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">保存排序结果</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">默认情况下，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_SORT" style="margin:0px; padding:0px; color:black">SORT</a>操作只是简单地返回排序结果，如果你希望保存排序结果，可以给<tt class="docutils literal" style="margin:0px; padding:0px">STORE</tt>选项指定一个<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>作为参数，排序结果将以列表的形式被保存到这个<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>上。(若指定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>已存在，则覆盖。)</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('user_info_sorted_by_level');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 确保指定key不存在   //(integer) 0</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('BY'=&gt;'user_level_*',<br style="margin:0px; padding:0px"/>            'GET'=&gt;<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('#','user_name_*','user_password_*'),<br style="margin:0px; padding:0px"/>            'STORE'=&gt;'user_info_sorted_by_level'<br style="margin:0px; padding:0px"/>            );<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('user_id',<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(12)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LRANGE('user_info_sorted_by_level', 0 ,11));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 查看排序结果  //array(12) { [0]=&gt; string(5) "59230" [1]=&gt; string(4) "jack" [2]=&gt; string(10) "jack201022" [3]=&gt; string(1) "2" [4]=&gt; string(6) "huangz" [5]=&gt; string(11) "nobodyknows" [6]=&gt; string(3) "222" [7]=&gt; string(6) "hacker" [8]=&gt; string(9) "hey,im in" [9]=&gt; string(1) "1" [10]=&gt; string(5) "admin" [11]=&gt; string(20) "a_long_long_password" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">-----------------------------------------------------------------</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">1) "59230"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">2) "jack"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">3) "jack201022"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">4) "2"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">5) "huangz"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">6) "nobodyknows"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">7) "222"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">8) "hacker"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">9) "hey,im in"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">10) "1"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">11) "admin"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">12) "a_long_long_password"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">一个有趣的用法是将SORT结果保存，用EXPIRE为结果集设置生存时间，这样结果集就成了SORT操作的一个缓存。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">这样就不必频繁地调用SORT操作了，只有当结果集过期时，才需要再调用一次SORT操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">有时候为了正确实现这一用法，你可能需要加锁以避免多个客户端同时进行缓存重建(也就是多个客户端，同一时间进行SORT操作，并保存为结果集)，具体参见SETNX命令。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">在GET和BY中使用哈希表</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">可以使用哈希表特有的语法，在SORT命令中进行GET和BY操作。</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 假设现在我们的用户表新增了一个serial项来为作为每个用户的序列号</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 序列号以哈希表的形式保存在serial哈希域内。</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_hash_testdata_array</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>(1=&gt;'23131283',<br style="margin:0px; padding:0px"/>                2=&gt;'23810573',<br style="margin:0px; padding:0px"/>                222=&gt;'502342349',<br style="margin:0px; padding:0px"/>                59230=&gt;'2435829758'<br style="margin:0px; padding:0px"/>                );<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;HMSET('serial',<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_hash_testdata_array</span>);<br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 我们希望以比较serial中的大小来作为排序user_id的方式</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('BY'=&gt;'*-&gt;serial');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">SORT</span>('user_id', <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_sort_option</span>)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(4) { [0]=&gt; string(3) "222" [1]=&gt; string(5) "59230" [2]=&gt; string(1) "2" [3]=&gt; string(1) "1" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">----------------------------------------</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">1) "222"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">2) "59230"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">3) "2"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/>#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">4) "1"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; font-size:18pt"><span style="margin:0px; padding:0px">符号<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">"<span style="margin:0px; padding:0px; color:rgb(255,0,0)">-&gt;</span>"</span></tt></span></span>用于分割哈希表的关键字(key&#13;
 name)和索引域(hash field)，格式为<tt class="docutils literal" style="margin:0px; padding:0px">"key-&gt;field"</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">除此之外，哈希表的<tt class="docutils literal" style="margin:0px; padding:0px">BY</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">GET</tt>操作和上面介绍的其他数据结构(列表、集合、有序集合)没有什么不同。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">O(N+M*log(M))，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为要排序的列表或集合内的元素数量，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为要返回的元素数量。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果只是使用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_SORT" style="margin:0px; padding:0px; color:black">SORT</a>命令的<tt class="docutils literal" style="margin:0px; padding:0px">GET</tt>选项获取数据而没有进行排序，时间复杂度O(N)。</div>&#13;
</div>&#13;
</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">没有使用<tt class="docutils literal" style="margin:0px; padding:0px">STORE</tt>参数，返回列表形式的排序结果。</div>&#13;
<div class="line" style="margin:0px; padding:0px">使用<tt class="docutils literal" style="margin:0px; padding:0px">STORE</tt>参数，返回排序结果的元素数量。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h1 style="margin:0px; padding:0px; font-size:28px"><a target="_blank" name="STRING" style="margin:0px; padding:0px"/>字符串(String)</h1>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" name="string_SET" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">SET</span></p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SET key value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将字符串值<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>关联到<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>已经持有其他值，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SET" style="margin:0px; padding:0px; color:black">SET</a>就覆写旧值，无视类型。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px">时间复杂度：</span>O(1)<span style="margin:0px; padding:0px">返回值：</span>总是返回<tt class="docutils literal" style="margin:0px; padding:0px">OK(TRUE)</tt>，因为<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SET" style="margin:0px; padding:0px; color:black">SET</a>不可能失败。</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：对字符串类型的key进行SET</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('apple', 'www.apple.com');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">OK  //bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('apple');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">"www.apple.com"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：对非字符串类型的key进行SET</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;LPUSH('greet_list', "hello");  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 建立一个列表 #(integer) 1 //int(1)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TYPE('greet_list');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">list //int(3)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('greet_list', "yooooooooooooooooo");   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 覆盖列表类型 #OK //bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TYPE('greet_list');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string //int(1)</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
</div>&#13;
<div id="post_content" style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
<span style="margin:0px; padding:0px"><a target="_blank" name="string_SETNX" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">SETNX</span></span></div>&#13;
<div style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SETNX key value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的值设为<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>，当且仅当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">若给定的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>已经存在，则<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>不做任何动作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>是”SET&#13;
 if Not eXists”(如果不存在，则SET)的简写。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">设置成功，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">设置失败，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl></div>&#13;
<div style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">SETNX</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;SETNX&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('job');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> job不存在 //bool(false);</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETNX('job', "programmer");  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> job设置成功 //bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETNX('job', "code-farmer");  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> job设置失败 //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('job');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 没有被覆盖 //"programmer"</span></pre>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">设计模式(Design pattern): 将SETNX用于加锁(locking)</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>可以用作加锁原语(locking&#13;
 primitive)。比如说，要对关键字(key)<tt class="docutils literal" style="margin:0px; padding:0px">foo</tt>加锁，客户端可以尝试以下方式：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SETNX</span> <span class="pre" style="margin:0px; padding:0px">lock.foo</span> <span class="pre" style="margin:0px; padding:0px">&lt;current</span> <span class="pre" style="margin:0px; padding:0px">Unix</span> <span class="pre" style="margin:0px; padding:0px">time</span> <span class="pre" style="margin:0px; padding:0px">+</span> <span class="pre" style="margin:0px; padding:0px">lock</span> <span class="pre" style="margin:0px; padding:0px">timeout</span> <span class="pre" style="margin:0px; padding:0px">+</span> <span class="pre" style="margin:0px; padding:0px">1&gt;</span></tt></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>，说明客户端已经获得了锁，<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>设置的unix时间则指定了锁失效的时间。之后客户端可以通过<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">DEL</span> <span class="pre" style="margin:0px; padding:0px">lock.foo</span></tt>来释放锁。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>，说明<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>已经被其他客户端上锁了。如果锁是非阻塞(non&#13;
 blocking lock)的，我们可以选择返回调用，或者进入一个重试循环，直到成功获得锁或重试超时(timeout)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">处理死锁(deadlock)</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">上面的锁算法有一个问题：如果因为客户端失败、崩溃或其他原因导致没有办法释放锁的话，怎么办？</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">这种状况可以通过检测发现——因为上锁的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>保存的是unix时间戳，假如<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>值的时间戳小于当前的时间戳，表示锁已经不再有效。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">但是，当有多个客户端同时检测一个锁是否过期并尝试释放它的时候，我们不能简单粗暴地删除死锁的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>，再用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>上锁，因为这时竞争条件(race&#13;
 condition)已经形成了：</p>&#13;
<ul class="simple" style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc">C1和C2读取<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>并检查时间戳，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>都返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>，因为它已经被C3锁上了，但C3在上锁之后就崩溃(crashed)了。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">C1向<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>发送<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_del" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">DEL</span></a>命令。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">C1向<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>发送<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>并成功。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">C2向<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>发送<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_del" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">DEL</span></a>命令。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">C2向<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>发送<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>并成功。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">出错：因为竞争条件的关系，C1和C2两个都获得了锁。</li></ul><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">幸好，以下算法可以避免以上问题。来看看我们聪明的C4客户端怎么办：</p>&#13;
<ul class="simple" style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc">C4向<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>发送<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETNX" style="margin:0px; padding:0px; color:black">SETNX</a>命令。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">因为崩溃掉的C3还锁着<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>，所以Redis向C4返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">C4向<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>发送<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_GET" style="margin:0px; padding:0px; color:black">GET</a>命令，查看<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>的锁是否过期。如果不，则休眠(sleep)一段时间，并在之后重试。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">另一方面，如果<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>内的unix时间戳比当前时间戳老，C4执行以下命令：</li></ul><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">GETSET</span> <span class="pre" style="margin:0px; padding:0px">lock.foo</span> <span class="pre" style="margin:0px; padding:0px">&lt;current</span> <span class="pre" style="margin:0px; padding:0px">Unix</span> <span class="pre" style="margin:0px; padding:0px">timestamp</span> <span class="pre" style="margin:0px; padding:0px">+</span> <span class="pre" style="margin:0px; padding:0px">lock</span> <span class="pre" style="margin:0px; padding:0px">timeout</span> <span class="pre" style="margin:0px; padding:0px">+</span> <span class="pre" style="margin:0px; padding:0px">1&gt;</span></tt></p>&#13;
<ul class="simple" style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc">因为<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#getset" style="margin:0px; padding:0px; color:black">GETSET</a>的作用，C4可以检查看<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#getset" style="margin:0px; padding:0px; color:black">GETSET</a>的返回值，确定<tt class="docutils literal" style="margin:0px; padding:0px">lock.foo</tt>之前储存的旧值仍是那个过期时间戳，如果是的话，那么C4获得锁。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">如果其他客户端，比如C5，比C4更快地执行了<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#getset" style="margin:0px; padding:0px; color:black">GETSET</a>操作并获得锁，那么C4的<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#getset" style="margin:0px; padding:0px; color:black">GETSET</a>操作返回的就是一个未过期的时间戳(C5设置的时间戳)。C4只好从第一步开始重试。</li></ul><div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">注意，即便C4的<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#getset" style="margin:0px; padding:0px; color:black">GETSET</a>操作对<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>进行了修改，这对未来也没什么影响。</div>&#13;
<div class="line" style="margin:0px; padding:0px">(这里是不是有点问题？C4的确是可以重试，但C5怎么办？它的锁的过期被C4修改了。——译注)</div>&#13;
</div>&#13;
</div>&#13;
<div style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
<blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
 <span style="margin:0px; padding:0px; color:rgb(255,0,0)">警告</span></p>&#13;
<p class="last" style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)">为了让这个加锁算法更健壮，获得锁的客户端应该常常检查过期时间以免锁因诸如<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_del" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><span style="margin:0px; padding:0px">DEL</span></span></a>等命令的执行而被意外解开，因为客户端失败的情况非常复杂，不仅仅是崩溃这么简单，还可能是客户端因为某些操作被阻塞了相当长时间，紧接着<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#key_del" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><span style="margin:0px; padding:0px">DEL</span></span></a>命令被尝试执行(但这时锁却在另外的客户端手上)。</span></p>&#13;
</blockquote>&#13;
</div>&#13;
<div style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
 </div>&#13;
<div style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
<span style="margin:0px; padding:0px"><a target="_blank" name="string_SETEX" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">SETEX</span></span></div>&#13;
<div style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
SETEX key seconds value</div>&#13;
<div style="margin:0px; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px">&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将值<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>关联到<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>，并将<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的生存时间设为<tt class="docutils literal" style="margin:0px; padding:0px">seconds</tt>(以秒为单位)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt> 已经存在，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETEX" style="margin:0px; padding:0px; color:black">SETEX</a>命令将覆写旧值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">这个命令类似于以下两个命令：</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('key', 'value');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXPIRE('key','seconds');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 设置生存时间 </span></pre>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">不同之处是，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETEX" style="margin:0px; padding:0px; color:black">SETEX</a>是一个原子性(atomic)操作，关联值和设置生存时间两个动作会在同一时间内完成，该命令在Redis用作缓存时，非常实用。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">设置成功时返回<tt class="docutils literal" style="margin:0px; padding:0px">OK</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">seconds</tt>参数不合法时，返回一个错误。</div>&#13;
</div>&#13;
</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：key不存在</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETEX('cache_user_id', 60,10086);<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('cache_user_id');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 值 //"10086"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">sleep</span>(4);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;TTL('cache_user_id');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 剩余生存时间 //int(56)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：key已经存在，key被覆写</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('cd', "timeless"); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(true);</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETEX('cd', 3000,"goodbye my love"); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(true);</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('cd');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">"goodbye my love"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" name="string_SETRANGE" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt"><span style="margin:0px; padding:0px">SETRANGE</span></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">SETRANGE key offset value</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">用<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>参数覆写(Overwrite)给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>所储存的字符串值，从偏移量<tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>开始。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">不存在的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>当作空白字符串处理。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETRANGE" style="margin:0px; padding:0px; color:black">SETRANGE</a>命令会确保字符串足够长以便将<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>设置在指定的偏移量上，如果给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>原来储存的字符串长度比偏移量小(比如字符串只有<tt class="docutils literal" style="margin:0px; padding:0px">5</tt>个字符长，但你设置的<tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>是<tt class="docutils literal" style="margin:0px; padding:0px">10</tt>)，那么原字符和偏移量之间的空白将用零比特(zerobytes,<tt class="docutils literal" style="margin:0px; padding:0px">"\x00"</tt>)来填充。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">注意你能使用的最大偏移量是2^29-1(536870911)，因为Redis的字符串被限制在512兆(megabytes)内。如果你需要使用比这更大的空间，你得使用多个<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">对小(small)的字符串，平摊复杂度O(1)。(关于什么字符串是”小”的，请参考<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_APPEND" style="margin:0px; padding:0px; color:black">APPEND</a>命令)</div>&#13;
<div class="line" style="margin:0px; padding:0px">否则为O(M)，M为value参数的长度。</div>&#13;
</div>&#13;
</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">被<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETRANGE" style="margin:0px; padding:0px; color:black">SETRANGE</a>修改之后，字符串的长度。</dd></dl><blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
 <span style="margin:0px; padding:0px; color:rgb(255,0,0)">警告</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"> 当生成一个很长的字符串时，Redis需要分配内存空间，该操作有时候可能会造成服务器阻塞(block)。在2010年的Macbook Pro上，设置偏移量为536870911(512MB内存分配)，耗费约300毫秒， 设置偏移量为134217728(128MB内存分配)，耗费约80毫秒，设置偏移量33554432(32MB内存分配)，耗费约30毫秒，设置偏移量为8388608(8MB内存分配)，耗费约8毫秒。&#13;
 注意若首次内存分配成功之后，再对同一个<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">key</span></tt>调用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETRANGE" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px; color:rgb(255,0,0)">SETRANGE</span></a>操作，无须再重新内存。</span></p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">模式</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">因为有了<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETRANGE" style="margin:0px; padding:0px; color:black">SETRANGE</a>和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_GETRANGE" style="margin:0px; padding:0px; color:black">GETRANGE</a>命令，你可以将Redis字符串用作具有O(1)随机访问时间的线性数组。这在很多真实用例中都是非常快速且高效的储存方式。</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：对非空字符串进行SETRANGE</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('greeting', "hello world");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETRANGE('greeting', 6, "Redis"); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(11)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('greeting');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">"hello Redis"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：对空字符串/不存在的key进行SETRANGE</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('empty_string');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETRANGE('empty_string', 5 ,"Redis!");  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 对不存在的key使用SETRANGE //int(11)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('empty_string'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 空白处被"\x00"填充  #"\x00\x00\x00\x00\x00Redis!"   //return string(11) "Redis!"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px"><a target="_blank" name="string_MSET" style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; font-size:18pt">MSET </span></span><br style="margin:0px; padding:0px"/>&#13;
MSET key value [key value ...]</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">同时设置一个或多个<tt class="docutils literal" style="margin:0px; padding:0px">key-value</tt>对。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当发现同名的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在时，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_MSET" style="margin:0px; padding:0px; color:black">MSET</a>会用新值覆盖旧值，如果你不希望覆盖同名<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>，请使用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_MSETNX" style="margin:0px; padding:0px; color:black">MSETNX</a>命令。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_MSET" style="margin:0px; padding:0px; color:black">MSET</a>是一个原子性(atomic)操作，所有给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>都在同一时间内被设置，某些给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>被更新而另一些给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>没有改变的情况，不可能发生。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为要设置的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回<tt class="docutils literal" style="margin:0px; padding:0px">OK</tt>(因为<tt class="docutils literal" style="margin:0px; padding:0px">MSET</tt>不可能失败)</dd><dd style="margin:0px; padding:0px"/></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">MSET</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;MSET&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;select(0);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;flushdb();<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('date'=&gt;'2012.3.5',<br style="margin:0px; padding:0px"/>        'time'=&gt;'9.09a.m.',<br style="margin:0px; padding:0px"/>        'weather'=&gt;'sunny'<br style="margin:0px; padding:0px"/>        );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MSET(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset</span>); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;KEYS('*'));   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 确保指定的三个key-value对被插入 //array(3) { [0]=&gt; string(4) "time" [1]=&gt; string(7) "weather" [2]=&gt; string(4) "date" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> MSET覆盖旧值的例子 但是经过测试覆盖不了</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('google', "google.cn"));   <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MSET('google',"google.hk")); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('google'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">google.cn  <span style="margin:0px; padding:0px">与redis手册的示例结果不符</span></span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_MSETNX" style="margin:0px; padding:0px"/>MSETNX</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">MSETNX key value [key value ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">同时设置一个或多个<tt class="docutils literal" style="margin:0px; padding:0px">key-value</tt>对，当且仅当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">即使<span style="margin:0px; padding:0px">只有一个</span><tt class="docutils literal" style="margin:0px; padding:0px">key</tt>已存在，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_MSETNX" style="margin:0px; padding:0px; color:black">MSETNX</a>也会拒绝<span style="margin:0px; padding:0px">所有</span>传入<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的设置操作</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_MSETNX" style="margin:0px; padding:0px; color:black">MSETNX</a>是原子性的，因此它可以用作设置多个不同<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>表示不同字段(field)的唯一性逻辑对象(unique&#13;
 logic object)，所有字段要么全被设置，要么全不被设置。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为要设置的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">当所有<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>都成功设置，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果所有key都设置失败(最少有一个<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>已经存在)，那么返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：对不存在的key进行MSETNX</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('rmdbs'=&gt;'MySQL',<br style="margin:0px; padding:0px"/>        'nosql'=&gt;'MongoDB',<br style="margin:0px; padding:0px"/>        'key-value-store'=&gt;'redis'<br style="margin:0px; padding:0px"/>        );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MSETNX(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset</span>);<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：对已存在的key进行MSETNX</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('rmdbs'=&gt;'Sqlite',<br style="margin:0px; padding:0px"/>        'language'=&gt;'python'<br style="margin:0px; padding:0px"/>        );<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MSETNX(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset</span>));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> rmdbs键已经存在，操作失败 //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('language'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 因为操作是原子性的，language没有被设置  bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('rmdbs');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> rmdbs没有被修改 //"MySQL"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset_keys</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>( 'rmdbs', 'nosql', 'key-value-store');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">print_r</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MGET(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$array_mset_keys</span>)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">Array ( [0] =&gt; MySQL [1] =&gt; MongoDB [2] =&gt; redis )</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_APPEND" style="margin:0px; padding:0px"/>APPEND</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">APPEND key value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>已经存在并且是一个字符串，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_APPEND" style="margin:0px; padding:0px; color:black">APPEND</a>命令将<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>追加到<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>原来的值之后。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_APPEND" style="margin:0px; padding:0px; color:black">APPEND</a>就简单地将给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>设为<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>，就像执行<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SET</span> <span class="pre" style="margin:0px; padding:0px">key</span> <span class="pre" style="margin:0px; padding:0px">value</span></tt>一样。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">平摊复杂度O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">追加<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>之后，<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中字符串的长度。</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：对不存在的key执行APPEND</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('myphone');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 确保myphone不存在 //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;APPEND('myphone',"nokia");  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 对不存在的key进行APPEND，等同于SET myphone "nokia" //int(5) # 字符长度</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：对字符串进行APPEND</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;APPEND('myphone', " - 1110");<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 长度从5个字符增加到12个字符 //int(12)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('myphone');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 查看整个字符串 //"nokia - 1110"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_GET" style="margin:0px; padding:0px"/>GET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">GET key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>所关联的字符串值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在则返回特殊值<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">假如<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>储存的值不是字符串类型，返回一个错误，因为<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#get" style="margin:0px; padding:0px; color:black">GET</a>只能用于处理字符串值。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的值。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">GET</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('fake_key')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(nil) //return bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('animate', "anohana"); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">return bool(true)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('animate')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">return string(7) "anohana"</span></pre>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_MGET" style="margin:0px; padding:0px"/>MGET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">MGET key [key ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回所有(一个或多个)给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果某个指定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，那么返回特殊值<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。因此，该命令永不失败。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">一个包含所有给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的值的列表。</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">MGET</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;MGET&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_mget_data_array</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('name'=&gt;'ikodota','blog'=&gt;'cnblogs.com/ikodota');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MSET(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_mget_data_array</span>);<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">用MSET一次储存多个值 </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_mget_key_array</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('name','blog');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MGET(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_mget_key_array</span>)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">array(2) { [0]=&gt; string(7) "ikodota" [1]=&gt; string(19) "cnblogs.com/ikodota" }</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('fake_key'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_mget_key_array</span>=<span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">array</span>('name','fake_key');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;MGET(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis_mget_key_array</span>));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 当MGET中有不存在key的情况   //array(2) { [0]=&gt; string(7) "ikodota" [1]=&gt; bool(false) }</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_GETRANGE" style="margin:0px; padding:0px"/>GETRANGE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">GETRANGE key start end</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中字符串值的子字符串，字符串的截取范围由<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">end</tt>两个偏移量决定(包括<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">end</tt>在内)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">负数偏移量表示从字符串最后开始计数，<tt class="docutils literal" style="margin:0px; padding:0px">-1</tt>表示最后一个字符，<tt class="docutils literal" style="margin:0px; padding:0px">-2</tt>表示倒数第二个，以此类推。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_GETRANGE" style="margin:0px; padding:0px; color:black">GETRANGE</a>通过保证子字符串的值域(range)不超过实际字符串的值域来处理超出范围的值域请求。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为要返回的字符串的长度。</div>&#13;
<div class="line" style="margin:0px; padding:0px">复杂度最终由返回值长度决定，但因为从已有字符串中建立子字符串的操作非常廉价(cheap)，所以对于长度不大的字符串，该操作的复杂度也可看作O(1)。</div>&#13;
</div>&#13;
</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">截取得出的子字符串。</dd></dl><blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
注解:在&lt;=2.0的版本里，GETRANGE被叫作SUBSTR。</p>&#13;
</blockquote>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">GETRANGE</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;GETRANGE&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('greeting', "hello, my friend");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GETRANGE('greeting', 0, 4).'&lt;br&gt;';  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 返回索引0-4的字符，包括4。 //"hello"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GETRANGE('greeting', -1 ,-5).'&lt;br&gt;';  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 不支持回绕操作  //""</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GETRANGE('greeting', -3 ,-1).'&lt;br&gt;';  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 负数索引 //"end"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GETRANGE('greeting', 0, -1).'&lt;br&gt;';  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 从第一个到最后一个 //"hello, my friend"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GETRANGE('greeting', 0, 1008611).'&lt;br&gt;';  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 值域范围不超过实际字符串，超过部分自动被符略 //"hello, my friend"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_GETSET" style="margin:0px; padding:0px"/>GETSET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">GETSET key value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的值设为<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>，并返回<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的旧值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在但不是字符串类型时，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">返回给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的旧值(old value)。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>没有旧值时，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
</div>&#13;
</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">GETSET</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;GETSET&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('mail'));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">return bool(false);</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GETSET('mail','xxx@google.com'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 因为mail之前不存在，没有旧值，返回nil ,#(nil)   //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GETSET('mail','xxx@yahoo.com'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> mail被更新，旧值被返回 //string(14) "xxx@google.com"</span></pre>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">设计模式</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_GETSET" style="margin:0px; padding:0px; color:black">GETSET</a>可以和<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#incr" style="margin:0px; padding:0px; color:black">INCR</a>组合使用，实现一个有原子性(atomic)复位操作的计数器(counter)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">举例来说，每次当某个事件发生时，进程可能对一个名为<tt class="docutils literal" style="margin:0px; padding:0px">mycount</tt>的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>调用<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#incr" style="margin:0px; padding:0px; color:black">INCR</a>操作，通常我们还要在一个原子时间内同时完成获得计数器的值和将计数器值复位为<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>两个操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">可以用命令<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">GETSET</span> <span class="pre" style="margin:0px; padding:0px">mycounter</span> <span class="pre" style="margin:0px; padding:0px">0</span></tt>来实现这一目标。</p>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SELECT(2);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;INCR('mycount').'&lt;br&gt;'; <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 11</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">if</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('mycount')&gt;19){<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GETSET('mycount', 0).'&lt;br&gt;';  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 一个原子内完成GET mycount和SET mycount 0操作 #"11" </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span>}<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('mycount'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">"0"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_STRLEN" style="margin:0px; padding:0px"/>STRLEN</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">STRLEN key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>所储存的字符串值的长度。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>储存的不是字符串值时，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
复杂度：</dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px">返回值：</dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">字符串值的长度。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当 <tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('mykey', "Hello world");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">STRLEN</span>('mykey'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(11)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;<span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">STRLEN</span>('nonexisting'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 不存在的key长度视为0  //int(0)</span></pre>&#13;
</div>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
</dt><dt style="margin:0px; padding:0px"/></dl><h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_INCR" style="margin:0px; padding:0px"/>INCR</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">INCR key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中储存的数字值增一。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的初始值，然后执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_INCR" style="margin:0px; padding:0px; color:black">INCR</a>操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">本操作的值限制在64位(bit)有符号数字表示之内。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_INCR" style="margin:0px; padding:0px; color:black">INCR</a>命令之后<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的值。</dd></dl><blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">注解</span>:这是一个针对字符串的操作，因为Redis没有专用的整数类型，所以key内储存的字符串被解释为十进制64位有符号整数来执行INCR操作。</p>&#13;
</blockquote>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('page_view', 20);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;INCR('page_view')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(21) </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('page_view'));    <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 数字值在Redis中以字符串的形式保存 //string(2) "21</span></pre>&#13;
</div>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_INCRBY" style="margin:0px; padding:0px"/>INCRBY</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">INCRBY key increment</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>所储存的值加上增量<tt class="docutils literal" style="margin:0px; padding:0px">increment</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的初始值，然后执行<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#incrby" style="margin:0px; padding:0px; color:black">INCRBY</a>命令。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">本操作的值限制在64位(bit)有符号数字表示之内。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">关于更多递增(increment)/递减(decrement)操作信息，参见<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_INCR" style="margin:0px; padding:0px; color:black">INCR</a>命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">加上<tt class="docutils literal" style="margin:0px; padding:0px">increment</tt>之后，<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的值。</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">INCRBY</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;INCRBY&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：key存在且是数字值</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('rank', 50);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 设置rank为50</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;INCRBY('rank', 20);  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 给rank加上20</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('rank')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">"70"   //string(2) "70"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：key不存在</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('counter'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;INCRBY('counter'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int 30  //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('counter')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">30 /<span style="margin:0px; padding:0px">/经测试 与手册上结果不一样</span>，不能直接从bool型转为int型。 return bool(false) </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况3：key不是数字值</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('book', "long long ago...");<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;INCRBY('book', 200)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(error) ERR value is not an integer or out of range   // bool(false)</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
 </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_DECR" style="margin:0px; padding:0px"/>DECR</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
</dt><dt style="margin:0px; padding:0px"><tt class="descname" style="margin:0px; padding:0px">DECR key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中储存的数字值减一。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的初始值，然后执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_DECR" style="margin:0px; padding:0px; color:black">DECR</a>操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">本操作的值限制在64位(bit)有符号数字表示之内。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">关于更多递增(increment)/递减(decrement)操作信息，参见<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_INCR" style="margin:0px; padding:0px; color:black">INCR</a>命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">执行<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/string.html#decr" style="margin:0px; padding:0px; color:black">DECR</a>命令之后<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的值。</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">DECR</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SELECT(3);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;flushdb();<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;DECR&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：对存在的数字值key进行DECR</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('failure_times', 10);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;DECR('failure_times'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(9)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('failure_times').'&lt;br&gt;';  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(1) "9"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：对不存在的key值进行DECR</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('count'); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 0 //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;DECR('count');  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(-1) </span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('count').'&lt;br&gt;'; <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(2) "-1"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况3：对存在但不是数值的key进行DECR</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('company', 'YOUR_CODE_SUCKS.LLC');<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;DECR('company')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(error) ERR value is not an integer or out of range   //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('company').'&lt;br&gt;'; <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">YOUR_CODE_SUCKS.LLC</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_DECRBY" style="margin:0px; padding:0px"/>DECRBY</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">DECRBY key decrement</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>所储存的值减去减量<tt class="docutils literal" style="margin:0px; padding:0px">decrement</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的初始值，然后执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_DECRBY" style="margin:0px; padding:0px; color:black">DECRBY</a>操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果值包含错误的类型，或字符串类型的值不能表示为数字，那么返回一个错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">本操作的值限制在64位(bit)有符号数字表示之内。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">关于更多递增(increment)/递减(decrement)操作信息，参见<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_INCR" style="margin:0px; padding:0px; color:black">INCR</a>命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">减去<tt class="docutils literal" style="margin:0px; padding:0px">decrement</tt>之后，<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的值。</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况1：对存在的数值key进行DECRBY</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SET('count', 100);<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;DECRBY('count', 20)); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(80)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('count'));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(2) "80"</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"> 情况2：对不存在的key进行DECRBY</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;EXISTS('pages');<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">(integer) 0  //bool(false)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;DECRBY('pages', 10));  <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(-10)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('pages')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(3) "-10"</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_SETBIT" style="margin:0px; padding:0px"/>SETBIT</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SETBIT key offset value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">对<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>所储存的字符串值，设置或清除指定偏移量上的位(bit)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">位的设置或清除取决于<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>参数，可以是<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>也可以是<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，自动生成一个新的字符串值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">字符串会增长(grown)以确保它可以将<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>保存在指定的偏移量上。当字符串值增长时，空白位置以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>填充。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>参数必须大于或等于<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>，小于2^32(bit映射被限制在512MB内)。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">指定偏移量原来储存的位（"0"或"1"）.</dd></dl><blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">警告:对使用大的<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">offset</span></tt>的<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETBIT" style="margin:0px; padding:0px; color:black">SETBIT</a>操作来说，内存分配可能造成Redis服务器被阻塞。具体参考<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#string_SETRANGE" style="margin:0px; padding:0px; color:black">SETRANGE</a>命令，warning(警告)部分。</span></p>&#13;
</blockquote>&#13;
<div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">SETBIT</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> '&lt;br&gt;&lt;br&gt;SETBIT&lt;br&gt;';<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$bit_val</span>=67;<br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,0,255); line-height:1.5!important">echo</span> <span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">decbin</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$bit_val</span>).'&lt;br&gt;'; <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">1000011</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETBIT('bit',1,1));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)  空位上都是0</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETBIT('bit',2,0));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETBIT('bit',3,0));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETBIT('bit',4,0));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETBIT('bit',5,0));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETBIT('bit',6,1));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETBIT('bit',7,1));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('bit')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(1) "C" ,二进制为：1000011 ,ASCII:67</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GETBIT('bit', 6 )); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(1)  取出第6位（从左到右）为“1”</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETBIT('bit',5,1));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(0)  把第5位的0改为1</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;SETBIT('bit',6,0));<span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">int(1)  把第6位的1改为0</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important"><br style="margin:0px; padding:0px"/></span><br style="margin:0px; padding:0px"/><span style="margin:0px; padding:0px; color:rgb(0,128,128); line-height:1.5!important">var_dump</span>(<span style="margin:0px; padding:0px; color:rgb(128,0,128); line-height:1.5!important">$redis</span>-&gt;GET('bit')); <span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">//</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">string(1) "E ,二进制为：1000101,ASCII:69l</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin:5px 0px 0px; padding:0px"><span class="cnblogs_code_copy" style="margin:0px; padding:0px 5px 0px 0px; line-height:1.5!important"><a target="_blank" title="复制代码" style="margin:0px; padding:0px; text-decoration:underline; border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; padding:0px; max-width:900px; border:none!important"/></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><br style="margin:0px; padding:0px"/><br style="margin:0px; padding:0px"/></p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="string_GETBIT" style="margin:0px; padding:0px"/>GETBIT</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">GETBIT key offset</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">对<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>所储存的字符串值，获取指定偏移量上的位(bit)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>比字符串值的长度大，或者<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">字符串值指定偏移量上的位(bit)。</dd></dl><div class="cnblogs_code" style="margin:5px 0px; padding:5px; border:1px solid rgb(204,204,204); overflow:auto; font-family:'Courier New'!important; font-size:12px!important; background-color:rgb(245,245,245)">&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">#</span><span style="margin:0px; padding:0px; color:rgb(0,128,0); line-height:1.5!important">参见SETBIT的示例</span></pre>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h1 style="margin:0px; padding:0px; font-size:28px"><a target="_blank" name="hash" style="margin:0px; padding:0px"/>哈希表(Hash)</h1>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HSET" style="margin:0px; padding:0px"/>HSET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HSET key field value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中的域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>的值设为<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，一个新的哈希表被创建并进行<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/hash.html#hset" style="margin:0px; padding:0px; color:black">HSET</a>操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>已经存在于哈希表中，旧值将被覆盖。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>是哈希表中的一个新建域，并且值设置成功，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果哈希表中域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>已经存在且旧值已被新值覆盖，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HSETNX" style="margin:0px; padding:0px"/>HSETNX</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HSETNX key field value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中的域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>的值设置为<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>，当且仅当域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>不存在。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">若域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>已经存在，该操作无效。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，一个新哈希表被创建并执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HSETNX" style="margin:0px; padding:0px; color:black">HSETNX</a>命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">设置成功，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果给定域已经存在且没有操作被执行，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HMSET" style="margin:0px; padding:0px"/>HMSET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HMSET key field value [field value ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">同时将多个<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">field</span> <span class="pre" style="margin:0px; padding:0px">-</span> <span class="pre" style="margin:0px; padding:0px">value</span></tt>(域-值)对设置到哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">此命令会覆盖哈希表中已存在的域。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，一个空哈希表被创建并执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HMSET" style="margin:0px; padding:0px; color:black">HMSET</a>操作。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">field</span> <span class="pre" style="margin:0px; padding:0px">-</span> <span class="pre" style="margin:0px; padding:0px">value</span></tt>对的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果命令执行成功，返回<tt class="docutils literal" style="margin:0px; padding:0px">OK</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不是哈希表(hash)类型时，返回一个错误。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HGET" style="margin:0px; padding:0px"/>HGET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HGET key field</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中给定域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>的值。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">给定域的值。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当给定域不存在或是给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HMGET" style="margin:0px; padding:0px"/>HMGET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HMGET key field [field ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，一个或多个给定域的值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果给定的域不存在于哈希表，那么返回一个<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">因为不存在的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>被当作一个空哈希表来处理，所以对一个不存在的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>进行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HMGET" style="margin:0px; padding:0px; color:black">HMGET</a>操作将返回一个只带有<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>值的表。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为给定域的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">一个包含多个给定域的关联值的表，表值的排列顺序和给定域参数的请求顺序一样。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HGETALL" style="margin:0px; padding:0px"/>HGETALL</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HGETALL key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，所有的域和值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">在返回值里，紧跟每个域名(field name)之后是域的值(value)，所以返回值的长度是哈希表大小的两倍。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为哈希表的大小。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">以列表形式返回哈希表的域和域的值。 若<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，返回空列表。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HDEL" style="margin:0px; padding:0px"/>HDEL</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HDEL key field [field ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">删除哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中的一个或多个指定域，不存在的域将被忽略。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为要删除的域的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">被成功移除的域的数量，不包括被忽略的域。</dd></dl><blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">注解:</span>在Redis2.4以下的版本里，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HDEL" style="margin:0px; padding:0px; color:black">HDEL</a>每次只能删除单个域，如果你需要在一个原子时间内删除多个域，请将命令包含在<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/transaction.html#multi" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">MULTI</span></a>/ <a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/transaction.html#exec" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">EXEC</span></a>块内。</p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HLEN" style="margin:0px; padding:0px"/>HLEN</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HLEN key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中域的数量。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">哈希表中域的数量。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HEXISTS" style="margin:0px; padding:0px"/>HEXISTS</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HEXISTS key field</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">查看哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，给定域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>是否存在。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果哈希表含有给定域，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果哈希表不含有给定域，或<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HINCRBY" style="margin:0px; padding:0px"/>HINCRBY</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HINCRBY key field increment</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">为哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中的域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>的值加上增量<tt class="docutils literal" style="margin:0px; padding:0px">increment</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">增量也可以为负数，相当于对给定域进行减法操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，一个新的哈希表被创建并执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HINCRBY" style="margin:0px; padding:0px; color:black">HINCRBY</a>命令。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>不存在，那么在执行命令前，域的值被初始化为<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">对一个储存字符串值的域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HINCRBY" style="margin:0px; padding:0px; color:black">HINCRBY</a>命令将造成一个错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">本操作的值限制在64位(bit)有符号数字表示之内。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#hash_HINCRBY" style="margin:0px; padding:0px; color:black">HINCRBY</a>命令之后，哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中域<tt class="docutils literal" style="margin:0px; padding:0px">field</tt>的值。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HKEYS" style="margin:0px; padding:0px"/>HKEYS</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HKEYS key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中的所有域。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为哈希表的大小。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">一个包含哈希表中所有域的表。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回一个空表。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="hash_HVALS" style="margin:0px; padding:0px"/>HVALS</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">HVALS key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回哈希表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中的所有值。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为哈希表的大小。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">一个包含哈希表中所有值的表。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回一个空表。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h1 style="margin:0px; padding:0px; font-size:28px"><a target="_blank" name="list" style="margin:0px; padding:0px"/>表(List)</h1>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">头元素和尾元素</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">头元素指的是列表左端/前端第一个元素，尾元素指的是列表右端/后端第一个元素。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">举个例子，列表<tt class="docutils literal" style="margin:0px; padding:0px">list</tt>包含三个元素：<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">x,</span> <span class="pre" style="margin:0px; padding:0px">y,</span> <span class="pre" style="margin:0px; padding:0px">z</span></tt>，其中<tt class="docutils literal" style="margin:0px; padding:0px">x</tt>是头元素，而<tt class="docutils literal" style="margin:0px; padding:0px">z</tt>则是尾元素。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">空列表</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">指不包含任何元素的列表，Redis将不存在的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>也视为空列表。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LPUSH" style="margin:0px; padding:0px"/>LPUSH</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LPUSH key value [value ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将一个或多个值<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>插入到列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的<span style="margin:0px; padding:0px">表头</span>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果有多个<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>值，那么各个<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>值按从左到右的顺序依次插入到表头：比如对一个空列表(<tt class="docutils literal" style="margin:0px; padding:0px">mylist</tt>)执行<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">LPUSH</span> <span class="pre" style="margin:0px; padding:0px">mylist</span> <span class="pre" style="margin:0px; padding:0px">a</span> <span class="pre" style="margin:0px; padding:0px">b</span> <span class="pre" style="margin:0px; padding:0px">c</span></tt>，则结果列表为<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">c</span> <span class="pre" style="margin:0px; padding:0px">b</span> <span class="pre" style="margin:0px; padding:0px">a</span></tt>，等同于执行执行命令<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">LPUSH</span> <span class="pre" style="margin:0px; padding:0px">mylist</span> <span class="pre" style="margin:0px; padding:0px">a</span></tt>、<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">LPUSH</span> <span class="pre" style="margin:0px; padding:0px">mylist</span> <span class="pre" style="margin:0px; padding:0px">b</span></tt>、<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">LPUSH</span> <span class="pre" style="margin:0px; padding:0px">mylist</span> <span class="pre" style="margin:0px; padding:0px">c</span></tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，一个空列表会被创建并执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSH" style="margin:0px; padding:0px; color:black">LPUSH</a>操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在但不是列表类型时，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSH" style="margin:0px; padding:0px; color:black">LPUSH</a>命令后，列表的长度。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">注解:</span>在Redis 2.4版本以前的<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSH" style="margin:0px; padding:0px; color:black">LPUSH</a>命令，都只接受单个<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>值。</p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LPUSHX" style="margin:0px; padding:0px"/>LPUSHX</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LPUSHX key value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将值<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>插入到列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的表头，当且仅当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在并且是一个列表。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSH" style="margin:0px; padding:0px; color:black">LPUSH</a>命令相反，当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSHX" style="margin:0px; padding:0px; color:black">LPUSHX</a>命令什么也不做。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSHX" style="margin:0px; padding:0px; color:black">LPUSHX</a>命令执行之后，表的长度。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_RPUSH" style="margin:0px; padding:0px"/>RPUSH</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">RPUSH key value [value ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将一个或多个值<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>插入到列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的<span style="margin:0px; padding:0px">表尾</span>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果有多个<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>值，那么各个<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>值按从左到右的顺序依次插入到表尾：比如对一个空列表(<tt class="docutils literal" style="margin:0px; padding:0px">mylist</tt>)执行<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">RPUSH</span> <span class="pre" style="margin:0px; padding:0px">mylist</span> <span class="pre" style="margin:0px; padding:0px">a</span> <span class="pre" style="margin:0px; padding:0px">b</span> <span class="pre" style="margin:0px; padding:0px">c</span></tt>，则结果列表为<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">a</span> <span class="pre" style="margin:0px; padding:0px">b</span> <span class="pre" style="margin:0px; padding:0px">c</span></tt>，等同于执行命令<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">RPUSH</span><span class="pre" style="margin:0px; padding:0px">mylist</span> <span class="pre" style="margin:0px; padding:0px">a</span></tt>、<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">RPUSH</span> <span class="pre" style="margin:0px; padding:0px">mylist</span> <span class="pre" style="margin:0px; padding:0px">b</span></tt>、<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">RPUSH</span> <span class="pre" style="margin:0px; padding:0px">mylist</span> <span class="pre" style="margin:0px; padding:0px">c</span></tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，一个空列表会被创建并执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSH" style="margin:0px; padding:0px; color:black">RPUSH</a>操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在但不是列表类型时，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSH" style="margin:0px; padding:0px; color:black">RPUSH</a>操作后，表的长度。</dd></dl><blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">注解:</span>在Redis 2.4版本以前的<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#rpush" style="margin:0px; padding:0px; color:black">RPUSH</a>命令，都只接受单个<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>值。</p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_RPUSHX" style="margin:0px; padding:0px"/>RPUSHX</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">RPUSHX key value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将值<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>插入到列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的表尾，当且仅当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在并且是一个列表。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSH" style="margin:0px; padding:0px; color:black">RPUSH</a>命令相反，当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSHX" style="margin:0px; padding:0px; color:black">RPUSHX</a>命令什么也不做。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSHX" style="margin:0px; padding:0px; color:black">RPUSHX</a>命令执行之后，表的长度。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LPOP" style="margin:0px; padding:0px"/>LPOP</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LPOP key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">移除并返回列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的头元素。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">列表的头元素。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_RPOP" style="margin:0px; padding:0px"/>RPOP</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">RPOP key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">移除并返回列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的尾元素。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">列表的尾元素。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_BLPOP" style="margin:0px; padding:0px"/>BLPOP</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">BLPOP key [key ...] timeout</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>是列表的阻塞式(blocking)弹出原语。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">它是<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPOP" style="margin:0px; padding:0px; color:black">LPOP</a>命令的阻塞版本，当给定列表内没有任何元素可供弹出的时候，连接将被<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>命令阻塞，直到等待超时或发现可弹出元素为止。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当给定多个<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>参数时，按参数<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的先后顺序依次检查各个列表，弹出第一个非空列表的头元素。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">非阻塞行为</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>被调用时，如果给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>内至少有一个非空列表，那么弹出遇到的第一个非空列表的头元素，并和被弹出元素所属的列表的名字一起，组成结果返回给调用者。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当存在多个给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>时，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>按给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>参数排列的先后顺序，依次检查各个列表。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">假设现在有<tt class="docutils literal" style="margin:0px; padding:0px">job</tt>、 <tt class="docutils literal" style="margin:0px; padding:0px">command</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">request</tt>三个列表，其中<tt class="docutils literal" style="margin:0px; padding:0px">job</tt>不存在，<tt class="docutils literal" style="margin:0px; padding:0px">command</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">request</tt>都持有非空列表。考虑以下命令：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">BLPOP</span> <span class="pre" style="margin:0px; padding:0px">job</span> <span class="pre" style="margin:0px; padding:0px">command</span> <span class="pre" style="margin:0px; padding:0px">request</span> <span class="pre" style="margin:0px; padding:0px">0</span></tt></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>保证返回的元素来自<tt class="docutils literal" style="margin:0px; padding:0px">command</tt>，因为它是按”查找<tt class="docutils literal" style="margin:0px; padding:0px">job</tt> -&gt;&#13;
 查找<tt class="docutils literal" style="margin:0px; padding:0px">command</tt> -&gt; 查找<tt class="docutils literal" style="margin:0px; padding:0px">request</tt>“这样的顺序，第一个找到的非空列表。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">阻塞行为</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果所有给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>都不存在或包含空列表，那么<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#blpop" style="margin:0px; padding:0px; color:black">BLPOP</a>命令将阻塞连接，直到等待超时，或有另一个客户端对给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的任意一个执行<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#lpush" style="margin:0px; padding:0px; color:black">LPUSH</a>或<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#rpush" style="margin:0px; padding:0px; color:black">RPUSH</a>命令为止。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">超时参数<tt class="docutils literal" style="margin:0px; padding:0px">timeout</tt>接受一个以秒为单位的数字作为值。超时参数设为<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>表示阻塞时间可以无限期延长(block indefinitely)&#13;
 。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">相同的key被多个客户端同时阻塞</span></p>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">相同的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>可以被多个客户端同时阻塞。</div>&#13;
<div class="line" style="margin:0px; padding:0px">不同的客户端被放进一个队列中，按”先阻塞先服务”(first-BLPOP，first-served)的顺序为<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>命令。</div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">在MULTI/EXEC事务中的BLPOP</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>可以用于流水线(pipline,批量地发送多个命令并读入多个回复)，但把它用在<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/transaction.html#multi" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">MULTI</span></a>/<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/transaction.html#exec" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">EXEC</span></a>块当中没有意义。因为这要求整个服务器被阻塞以保证块执行时的原子性，该行为阻止了其他客户端执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSH" style="margin:0px; padding:0px; color:black">LPUSH</a>或<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSH" style="margin:0px; padding:0px; color:black">RPUSH</a>命令。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">因此，一个被包裹在<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/transaction.html#multi" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">MULTI</span></a>/<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/transaction.html#exec" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">EXEC</span></a>块内的<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>命令，行为表现得就像<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPOP" style="margin:0px; padding:0px; color:black">LPOP</a>一样，对空列表返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>，对非空列表弹出列表元素，不进行任何阻塞操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">时间复杂度：</span>O(1)<span style="margin:0px; padding:0px">返回值：</span></p>&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果列表为空，返回一个<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">反之，返回一个含有两个元素的列表，第一个元素是被弹出元素所属的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>，第二个元素是被弹出元素的值。</div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_BRPOP" style="margin:0px; padding:0px"/>BRPOP</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">BRPOP key [key ...] timeout</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BRPOP" style="margin:0px; padding:0px; color:black">BRPOP</a>是列表的阻塞式(blocking)弹出原语。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">它是<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPOP" style="margin:0px; padding:0px; color:black">RPOP</a>命令的阻塞版本，当给定列表内没有任何元素可供弹出的时候，连接将被<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BRPOP" style="margin:0px; padding:0px; color:black">BRPOP</a>命令阻塞，直到等待超时或发现可弹出元素为止。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当给定多个<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>参数时，按参数<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的先后顺序依次检查各个列表，弹出第一个非空列表的尾部元素。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">关于阻塞操作的更多信息，请查看<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>命令，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BRPOP" style="margin:0px; padding:0px; color:black">BRPOP</a>除了弹出元素的位置和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BLPOP" style="margin:0px; padding:0px; color:black">BLPOP</a>不同之外，其他表现一致。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">假如在指定时间内没有任何元素被弹出，则返回一个<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>和等待时长。</div>&#13;
<div class="line" style="margin:0px; padding:0px">反之，返回一个含有两个元素的列表，第一个元素是被弹出元素所属的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>，第二个元素是被弹出元素的值。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LLEN" style="margin:0px; padding:0px"/>LLEN</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LLEN key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的长度。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，则<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>被解释为一个空列表，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>.</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不是列表类型，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的长度。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LRANGE" style="margin:0px; padding:0px"/>LRANGE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LRANGE key start stop</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中指定区间内的元素，区间以偏移量<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>指定。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">下标(index)参数<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>都以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为底，也就是说，以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>表示列表的第一个元素，以<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>表示列表的第二个元素，以此类推。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">你也可以使用负数下标，以<tt class="docutils literal" style="margin:0px; padding:0px">-1</tt>表示列表的最后一个元素，<tt class="docutils literal" style="margin:0px; padding:0px">-2</tt>表示列表的倒数第二个元素，以此类推。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">注意LRANGE命令和编程语言区间函数的区别</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">假如你有一个包含一百个元素的列表，对该列表执行<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">LRANGE</span> <span class="pre" style="margin:0px; padding:0px">list</span> <span class="pre" style="margin:0px; padding:0px">0</span> <span class="pre" style="margin:0px; padding:0px">10</span></tt>，结果是一个包含11个元素的列表，这表明<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>下标也在<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#lrange" style="margin:0px; padding:0px; color:black">LRANGE</a>命令的取值范围之内(闭区间)，这和某些语言的区间函数可能不一致，比如Ruby的<tt class="docutils literal" style="margin:0px; padding:0px">Range.new</tt>、<tt class="docutils literal" style="margin:0px; padding:0px">Array#slice</tt>和Python的<tt class="docutils literal" style="margin:0px; padding:0px">range()</tt>函数。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">超出范围的下标</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">超出范围的下标值不会引起错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>下标比列表的最大下标<tt class="docutils literal" style="margin:0px; padding:0px">end</tt>(<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">LLEN</span> <span class="pre" style="margin:0px; padding:0px">list</span></tt>减去<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>)还要大，或者<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">start</span> <span class="pre" style="margin:0px; padding:0px">&gt;</span> <span class="pre" style="margin:0px; padding:0px">stop</span></tt>，<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#lrange" style="margin:0px; padding:0px; color:black">LRANGE</a>返回一个空列表。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>下标比<tt class="docutils literal" style="margin:0px; padding:0px">end</tt>下标还要大，Redis将<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>的值设置为<tt class="docutils literal" style="margin:0px; padding:0px">end</tt>。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(S+N)，<tt class="docutils literal" style="margin:0px; padding:0px">S</tt>为偏移量<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为指定区间内元素的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">一个列表，包含指定区间内的元素。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LREM" style="margin:0px; padding:0px"/>LREM</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LREM key count value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">根据参数<tt class="docutils literal" style="margin:0px; padding:0px">count</tt>的值，移除列表中与参数<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>相等的元素。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="docutils literal" style="margin:0px; padding:0px">count</tt>的值可以是以下几种：</dt><dd style="margin:0px; padding:0px">&#13;
<ul class="first last simple" style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">count</span> <span class="pre" style="margin:0px; padding:0px">&gt;</span> <span class="pre" style="margin:0px; padding:0px">0</span></tt>:&#13;
 从表头开始向表尾搜索，移除与<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>相等的元素，数量为<tt class="docutils literal" style="margin:0px; padding:0px">count</tt>。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">count</span> <span class="pre" style="margin:0px; padding:0px">&lt;</span> <span class="pre" style="margin:0px; padding:0px">0</span></tt>:&#13;
 从表尾开始向表头搜索，移除与<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>相等的元素，数量为<tt class="docutils literal" style="margin:0px; padding:0px">count</tt>的绝对值。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">count</span> <span class="pre" style="margin:0px; padding:0px">=</span> <span class="pre" style="margin:0px; padding:0px">0</span></tt>:&#13;
 移除表中所有与<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>相等的值。</li></ul></dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为列表的长度。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">被移除元素的数量。</div>&#13;
<div class="line" style="margin:0px; padding:0px">因为不存在的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>被视作空表(empty list)，所以当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LREM" style="margin:0px; padding:0px; color:black">LREM</a>命令总是返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LSET" style="margin:0px; padding:0px"/>LSET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LSET key index value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>下标为<tt class="docutils literal" style="margin:0px; padding:0px">index</tt>的元素的值甚至为<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">更多信息请参考<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LINDEX" style="margin:0px; padding:0px; color:black">LINDEX</a>操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">index</tt>参数超出范围，或对一个空列表(<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在)进行<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#lset" style="margin:0px; padding:0px; color:black">LSET</a>时，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">对头元素或尾元素进行<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#lset" style="margin:0px; padding:0px; color:black">LSET</a>操作，复杂度为O(1)。</div>&#13;
<div class="line" style="margin:0px; padding:0px">其他情况下，为O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为列表的长度。</div>&#13;
</div>&#13;
</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">操作成功返回<tt class="docutils literal" style="margin:0px; padding:0px">ok</tt>，否则返回错误信息</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LTRIM" style="margin:0px; padding:0px"/>LTRIM</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LTRIM key start stop</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">对一个列表进行修剪(trim)，就是说，让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">举个例子，执行命令<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">LTRIM</span> <span class="pre" style="margin:0px; padding:0px">list</span> <span class="pre" style="margin:0px; padding:0px">0</span> <span class="pre" style="margin:0px; padding:0px">2</span></tt>，表示只保留列表<tt class="docutils literal" style="margin:0px; padding:0px">list</tt>的前三个元素，其余元素全部删除。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">下标(index)参数<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>都以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为底，也就是说，以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>表示列表的第一个元素，以<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>表示列表的第二个元素，以此类推。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">你也可以使用负数下标，以<tt class="docutils literal" style="margin:0px; padding:0px">-1</tt>表示列表的最后一个元素，<tt class="docutils literal" style="margin:0px; padding:0px">-2</tt>表示列表的倒数第二个元素，以此类推。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不是列表类型时，返回一个错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LTRIM" style="margin:0px; padding:0px; color:black">LTRIM</a>命令通常和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSH" style="margin:0px; padding:0px; color:black">LPUSH</a>命令或<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSH" style="margin:0px; padding:0px; color:black">RPUSH</a>命令配合使用，举个例子：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">这个例子模拟了一个日志程序，每次将最新日志<tt class="docutils literal" style="margin:0px; padding:0px">newest_log</tt>放到<tt class="docutils literal" style="margin:0px; padding:0px">log</tt>列表中，并且只保留最新的<tt class="docutils literal" style="margin:0px; padding:0px">100</tt>项。注意当这样使用<tt class="docutils literal" style="margin:0px; padding:0px">LTRIM</tt>命令时，时间复杂度是O(1)，因为平均情况下，每次只有一个元素被移除。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">注意LTRIM命令和编程语言区间函数的区别</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">假如你有一个包含一百个元素的列表<tt class="docutils literal" style="margin:0px; padding:0px">list</tt>，对该列表执行<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">LTRIM</span> <span class="pre" style="margin:0px; padding:0px">list</span> <span class="pre" style="margin:0px; padding:0px">0</span> <span class="pre" style="margin:0px; padding:0px">10</span></tt>，结果是一个包含11个元素的列表，这表明<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>下标也在<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#ltrim" style="margin:0px; padding:0px; color:black">LTRIM</a>命令的取值范围之内(闭区间)，这和某些语言的区间函数可能不一致，比如Ruby的<tt class="docutils literal" style="margin:0px; padding:0px">Range.new</tt>、<tt class="docutils literal" style="margin:0px; padding:0px">Array#slice</tt>和Python的<tt class="docutils literal" style="margin:0px; padding:0px">range()</tt>函数。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">超出范围的下标</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">超出范围的下标值不会引起错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>下标比列表的最大下标<tt class="docutils literal" style="margin:0px; padding:0px">end</tt>(<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">LLEN</span> <span class="pre" style="margin:0px; padding:0px">list</span></tt>减去<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>)还要大，或者<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">start</span> <span class="pre" style="margin:0px; padding:0px">&gt;</span> <span class="pre" style="margin:0px; padding:0px">stop</span></tt>，<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#ltrim" style="margin:0px; padding:0px; color:black">LTRIM</a>返回一个空列表(因为<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#ltrim" style="margin:0px; padding:0px; color:black">LTRIM</a>已经将整个列表清空)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>下标比<tt class="docutils literal" style="margin:0px; padding:0px">end</tt>下标还要大，Redis将<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>的值设置为<tt class="docutils literal" style="margin:0px; padding:0px">end</tt>。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为被移除的元素的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">命令执行成功时，返回<tt class="docutils literal" style="margin:0px; padding:0px">ok</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LINDEX" style="margin:0px; padding:0px"/>LINDEX</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LINDEX key index</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，下标为<tt class="docutils literal" style="margin:0px; padding:0px">index</tt>的元素。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">下标(index)参数<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>都以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为底，也就是说，以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>表示列表的第一个元素，以<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>表示列表的第二个元素，以此类推。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">你也可以使用负数下标，以<tt class="docutils literal" style="margin:0px; padding:0px">-1</tt>表示列表的最后一个元素，<tt class="docutils literal" style="margin:0px; padding:0px">-2</tt>表示列表的倒数第二个元素，以此类推。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不是列表类型，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为到达下标<tt class="docutils literal" style="margin:0px; padding:0px">index</tt>过程中经过的元素数量。</div>&#13;
<div class="line" style="margin:0px; padding:0px">因此，对列表的头元素和尾元素执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LINDEX" style="margin:0px; padding:0px; color:black">LINDEX</a>命令，复杂度为O(1)。</div>&#13;
</div>&#13;
</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">列表中下标为<tt class="docutils literal" style="margin:0px; padding:0px">index</tt>的元素。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">index</tt>参数的值不在列表的区间范围内(out of range)，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_LINSERT" style="margin:0px; padding:0px"/>LINSERT</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">LINSERT key BEFORE|AFTER pivot value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将值<tt class="docutils literal" style="margin:0px; padding:0px">value</tt>插入到列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>当中，位于值<tt class="docutils literal" style="margin:0px; padding:0px">pivot</tt>之前或之后。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">pivot</tt>不存在于列表<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>时，不执行任何操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>被视为空列表，不执行任何操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不是列表类型，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为寻找<tt class="docutils literal" style="margin:0px; padding:0px">pivot</tt>过程中经过的元素数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果命令执行成功，返回插入操作完成之后，列表的长度。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果没有找到<tt class="docutils literal" style="margin:0px; padding:0px">pivot</tt>，返回<tt class="docutils literal" style="margin:0px; padding:0px">-1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在或为空列表，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_RPOPLPUSH" style="margin:0px; padding:0px"/>RPOPLPUSH</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">RPOPLPUSH source destination</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">命令<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPOPLPUSH" style="margin:0px; padding:0px; color:black">RPOPLPUSH</a>在一个原子时间内，执行以下两个动作：</p>&#13;
<blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<div style="margin:0px; padding:0px">&#13;
<ul class="simple" style="margin:0px 0px 0px 25px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc">将列表<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>中的最后一个元素(尾元素)弹出，并返回给客户端。</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">将<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>弹出的元素插入到列表<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>，作为<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>列表的的头元素。</li></ul></div>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">举个例子，你有两个列表<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>，<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>列表有元素<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">a,</span> <span class="pre" style="margin:0px; padding:0px">b,</span> <span class="pre" style="margin:0px; padding:0px">c</span></tt>，<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>列表有元素<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">x,</span> <span class="pre" style="margin:0px; padding:0px">y,</span> <span class="pre" style="margin:0px; padding:0px">z</span></tt>，执行<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">RPOPLPUSH</span> <span class="pre" style="margin:0px; padding:0px">source</span> <span class="pre" style="margin:0px; padding:0px">destination</span></tt>之后，<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>列表包含元素<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">a,</span> <span class="pre" style="margin:0px; padding:0px">b</span></tt>，<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>列表包含元素<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">c,</span> <span class="pre" style="margin:0px; padding:0px">x,</span> <span class="pre" style="margin:0px; padding:0px">y,</span> <span class="pre" style="margin:0px; padding:0px">z</span></tt> ，并且元素<tt class="docutils literal" style="margin:0px; padding:0px">c</tt>被返回。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>不存在，值<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>被返回，并且不执行其他动作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>相同，则列表中的表尾元素被移动到表头，并返回该元素，可以把这种特殊情况视作列表的旋转(rotation)操作。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">被弹出的元素。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">设计模式： 一个安全的队列</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">Redis的列表经常被用作队列(queue)，用于在不同程序之间有序地交换消息(message)。一个程序(称之为生产者，producer)通过<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/list.html#lpush" style="margin:0px; padding:0px; color:black">LPUSH</a>命令将消息放入队列中，而另一个程序(称之为消费者，consumer)通过<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPOP" style="margin:0px; padding:0px; color:black">RPOP</a>命令取出队列中等待时间最长的消息。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">不幸的是，在这个过程中，一个消费者可能在获得一个消息之后崩溃，而未执行完成的消息也因此丢失。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPOPLPUSH" style="margin:0px; padding:0px; color:black">RPOPLPUSH</a>命令可以解决这个问题，因为它在返回一个消息之余，还将该消息添加到另一个列表当中，另外的这个列表可以用作消息的备份表：假如一切正常，当消费者完成该消息的处理之后，可以用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LREM" style="margin:0px; padding:0px; color:black">LREM</a>命令将该消息从备份表删除。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">另一方面，助手(helper)程序可以通过监视备份表，将超过一定处理时限的消息重新放入队列中去(负责处理该消息的消费者可能已经崩溃)，这样就不会丢失任何消息了。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="list_BRPOPLPUSH" style="margin:0px; padding:0px"/>BRPOPLPUSH</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">BRPOPLPUSH source destination timeout</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BRPOPLPUSH" style="margin:0px; padding:0px; color:black">BRPOPLPUSH</a>是<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPOPLPUSH" style="margin:0px; padding:0px; color:black">RPOPLPUSH</a>的阻塞版本，当给定列表<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>不为空时，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BRPOPLPUSH" style="margin:0px; padding:0px; color:black">BRPOPLPUSH</a>的表现和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPOPLPUSH" style="margin:0px; padding:0px; color:black">RPOPLPUSH</a>一样。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当列表<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>为空时，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_BRPOPLPUSH" style="margin:0px; padding:0px; color:black">BRPOPLPUSH</a>命令将阻塞连接，直到等待超时，或有另一个客户端对<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_LPUSH" style="margin:0px; padding:0px; color:black">LPUSH</a>或<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPUSH" style="margin:0px; padding:0px; color:black">RPUSH</a>命令为止。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">超时参数<tt class="docutils literal" style="margin:0px; padding:0px">timeout</tt>接受一个以秒为单位的数字作为值。超时参数设为<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>表示阻塞时间可以无限期延长(block indefinitely)&#13;
 。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">更多相关信息，请参考<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#list_RPOPLPUSH" style="margin:0px; padding:0px; color:black">RPOPLPUSH</a>命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">假如在指定时间内没有任何元素被弹出，则返回一个<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>和等待时长。</div>&#13;
<div class="line" style="margin:0px; padding:0px">反之，返回一个含有两个元素的列表，第一个元素是被弹出元素的值，第二个元素是等待时长。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h1 style="margin:0px; padding:0px; font-size:28px"><a target="_blank" name="set" style="margin:0px; padding:0px"/>集合(Set)</h1>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> 附录，常用集合运算：</p>&#13;
<blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">   A = {'a', 'b', 'c'}<br style="margin:0px; padding:0px"/>&#13;
B = {'a', 'e', 'i', 'o', 'u'}</p>&#13;
<pre style="margin-top:0px; margin-bottom:0px; padding:0px; white-space:pre-wrap; word-wrap:break-word">inter(x, y): 交集，在集合x和集合y中都存在的元素。
inter(A, B) = {'a'}

union(x, y): 并集，在集合x中或集合y中的元素，如果一个元素在x和y中都出现，那只记录一次即可。
union(A,B) = {'a', 'b', 'c', 'e', 'i', 'o', 'u'}

diff(x, y): 差集，在集合x中而不在集合y中的元素。
diff(A,B) = {'b', 'c'}

card(x): 基数，一个集合中元素的数量。
card(A) = 3

空集： 基数为0的集合。</pre>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SADD" style="margin:0px; padding:0px"/>SADD</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SADD key member [member ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将一个或多个<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素加入到集合<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>当中，已经存在于集合的<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素将被忽略。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">假如<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，则创建一个只包含<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素作成员的集合。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不是集合类型时，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>是被添加的元素的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">被添加到集合中的<span style="margin:0px; padding:0px">新</span>元素的数量，不包括被忽略的元素。</dd></dl><blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">注解:</span>在Redis2.4版本以前，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SADD" style="margin:0px; padding:0px; color:black">SADD</a>只接受单个<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>值。</p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SREM" style="margin:0px; padding:0px"/>SREM</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SREM key member [member ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">移除集合<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中的一个或多个<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素，不存在的<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素会被忽略。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不是集合类型，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为给定<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">被成功移除的元素的数量，不包括被忽略的元素。</dd></dl><blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">注解:</span>在Redis2.4版本以前，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SREM" style="margin:0px; padding:0px; color:black">SREM</a>只接受单个<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>值。</p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SMEMBERS" style="margin:0px; padding:0px"/>SMEMBERS</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SMEMBERS key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回集合<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中的所有成员。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为集合的基数。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">集合中的所有成员。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SISMEMBER" style="margin:0px; padding:0px"/>SISMEMBER</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SISMEMBER key member</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">判断<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素是否是集合<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的成员。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素是集合的成员，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素不是集合的成员，或<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SCARD" style="margin:0px; padding:0px"/>SCARD</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SCARD key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回集合<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的<span style="margin:0px; padding:0px">基数</span>(集合中元素的数量)。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">集合的基数。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SMOVE" style="margin:0px; padding:0px"/>SMOVE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SMOVE source destination member</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素从<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>集合移动到<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>集合。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SMOVE" style="margin:0px; padding:0px; color:black">SMOVE</a>是原子性操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>集合不存在或不包含指定的<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素，则<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SMOVE" style="margin:0px; padding:0px; color:black">SMOVE</a>命令不执行任何操作，仅返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。否则，<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素从<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>集合中被移除，并添加到<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>集合中去。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>集合已经包含<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素时，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SMOVE" style="margin:0px; padding:0px; color:black">SMOVE</a>命令只是简单地将<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>集合中的<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素删除。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>或<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>不是集合类型时，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素被成功移除，返回<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素不是<tt class="docutils literal" style="margin:0px; padding:0px">source</tt>集合的成员，并且没有任何操作对<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>集合执行，那么返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SPOP" style="margin:0px; padding:0px"/>SPOP</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SPOP key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">移除并返回集合中的一个随机元素。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">被移除的随机元素。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在或<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>是空集时，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">也可以参考:</span>如果只想获取一个随机元素，但不想该元素从集合中被移除的话，可以使用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SRANDMEMBER" style="margin:0px; padding:0px; color:black">SRANDMEMBER</a>命令。</p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SRANDMEMBER" style="margin:0px; padding:0px"/>SRANDMEMBER</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SRANDMEMBER key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回集合中的一个随机元素。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">该操作和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SPOP" style="margin:0px; padding:0px; color:black">SPOP</a>相似，但<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SPOP" style="margin:0px; padding:0px; color:black">SPOP</a>将随机元素从集合中移除并返回，而<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SRANDMEMBER" style="margin:0px; padding:0px; color:black">SRANDMEMBER</a>则仅仅返回随机元素，而不对集合进行任何改动。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">被选中的随机元素。 当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在或<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>是空集时，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SINTER" style="margin:0px; padding:0px"/>SINTER</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SINTER key [key ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回一个集合的全部成员，该集合是所有给定集合的<span style="margin:0px; padding:0px">交集</span>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">不存在的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>被视为空集。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当给定集合当中有一个空集时，结果也为空集(根据集合运算定律)。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N * M)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为给定集合当中基数最小的集合，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为给定集合的个数。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">交集成员的列表。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SINTERSTORE" style="margin:0px; padding:0px"/>SINTERSTORE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SINTERSTORE destination key [key ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">此命令等同于<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SINTER" style="margin:0px; padding:0px; color:black">SINTER</a>，但它将结果保存到<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>集合，而不是简单地返回结果集。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>集合已经存在，则将其覆盖。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>可以是<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>本身。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N * M)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为给定集合当中基数最小的集合，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为给定集合的个数。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">结果集中的成员数量。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SUNION" style="margin:0px; padding:0px"/>SUNION</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SUNION key [key ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回一个集合的全部成员，该集合是所有给定集合的<span style="margin:0px; padding:0px">并集</span>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">不存在的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>被视为空集。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>是所有给定集合的成员数量之和。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">并集成员的列表。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SUNIONSTORE" style="margin:0px; padding:0px"/>SUNIONSTORE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SUNIONSTORE destination key [key ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">此命令等同于<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SUNION" style="margin:0px; padding:0px; color:black">SUNION</a>，但它将结果保存到<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>集合，而不是简单地返回结果集。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>已经存在，则将其覆盖。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>可以是<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>本身。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>是所有给定集合的成员数量之和。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">结果集中的元素数量。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SDIFF" style="margin:0px; padding:0px"/>SDIFF</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SDIFF key [key ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回一个集合的全部成员，该集合是所有给定集合的<span style="margin:0px; padding:0px">差集</span> 。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">不存在的<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>被视为空集。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>是所有给定集合的成员数量之和。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">交集成员的列表。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="set_SDIFFSTORE" style="margin:0px; padding:0px"/>SDIFFSTORE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SDIFFSTORE destination key [key ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">此命令等同于<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#set_SDIFF" style="margin:0px; padding:0px; color:black">SDIFF</a>，但它将结果保存到<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>集合，而不是简单地返回结果集。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>集合已经存在，则将其覆盖。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>可以是<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>本身。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>是所有给定集合的成员数量之和。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">结果集中的元素数量。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h1 style="margin:0px; padding:0px; font-size:28px"><a target="_blank" name="Sorted-Set" style="margin:0px; padding:0px"/>有序集(Sorted Set)</h1>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZADD" style="margin:0px; padding:0px"/>ZADD</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZADD key score member [[score member] [score member] ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将一个或多个<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素及其<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值加入到有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>当中。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果某个<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>已经是有序集的成员，那么更新这个<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值，并通过重新插入这个<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素，来保证该<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>在正确的位置上。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值可以是整数值或双精度浮点数。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，则创建一个空的有序集并执行<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZADD" style="margin:0px; padding:0px; color:black">ZADD</a>操作。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在但不是有序集类型时，返回一个错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">对有序集的更多介绍请参见<a target="_blank" class="reference external" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#Sorted-Set" style="margin:0px; padding:0px; color:black">sorted&#13;
 set</a>。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(M*log(N))，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>是有序集的基数，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为成功添加的新成员的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">被成功添加的<span style="margin:0px; padding:0px">新</span>成员的数量，不包括那些被更新的、已经存在的成员。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">注解:</span>在Redis2.4版本以前，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZADD" style="margin:0px; padding:0px; color:black">ZADD</a>每次只能添加一个元素。</p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZREM" style="margin:0px; padding:0px"/>ZREM</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZREM key member [member ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">移除有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中的一个或多个成员，不存在的成员将被忽略。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在但不是有序集类型时，返回一个错误。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(M*log(N))，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为有序集的基数，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为被成功移除的成员的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">被成功移除的成员的数量，不包括被忽略的成员。</dd></dl><blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px">注解：</span>在Redis2.4版本以前，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREM" style="margin:0px; padding:0px; color:black">ZREM</a>每次只能删除一个元素。</p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZCARD" style="margin:0px; padding:0px"/>ZCARD</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZCARD key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的基数。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>存在且是有序集类型时，返回有序集的基数。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在时，返回<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZCOUNT" style="margin:0px; padding:0px"/>ZCOUNT</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZCOUNT key min max</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值在<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>之间(默认包括<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值等于<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>或<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>)的成员。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">关于参数<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>的详细使用方法，请参考<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZRANGEBYSCORE" style="margin:0px; padding:0px; color:black">ZRANGEBYSCORE</a>命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N)+M)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为有序集的基数，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为值在<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>之间的元素的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值在<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>之间的成员的数量。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZSCORE" style="margin:0px; padding:0px"/>ZSCORE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZSCORE key member</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，成员<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>元素不是有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的成员，或<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">member</tt>成员的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值，以字符串形式表示。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZINCRBY" style="margin:0px; padding:0px"/>ZINCRBY</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZINCRBY key increment member</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">为有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的成员<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值加上增量<tt class="docutils literal" style="margin:0px; padding:0px">increment</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">你也可以通过传递一个负数值<tt class="docutils literal" style="margin:0px; padding:0px">increment</tt>，让<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>减去相应的值，比如<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">ZINCRBY</span> <span class="pre" style="margin:0px; padding:0px">key</span> <span class="pre" style="margin:0px; padding:0px">-5</span> <span class="pre" style="margin:0px; padding:0px">member</span></tt>，就是让<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值减去<tt class="docutils literal" style="margin:0px; padding:0px">5</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不存在，或<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>不是<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的成员时，<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">ZINCRBY</span> <span class="pre" style="margin:0px; padding:0px">key</span> <span class="pre" style="margin:0px; padding:0px">increment</span> <span class="pre" style="margin:0px; padding:0px">member</span></tt>等同于<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">ZADD</span> <span class="pre" style="margin:0px; padding:0px">key</span> <span class="pre" style="margin:0px; padding:0px">increment</span> <span class="pre" style="margin:0px; padding:0px">member</span></tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">当<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>不是有序集类型时，返回一个错误。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值可以是整数值或双精度浮点数。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N))</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">member</tt>成员的新<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值，以字符串形式表示。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZRANGE" style="margin:0px; padding:0px"/>ZRANGE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZRANGE key start stop [WITHSCORES]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，指定区间内的成员。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">其中成员的位置按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递增(从小到大)来排序。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">具有相同<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值的成员按字典序(<a target="_blank" class="reference external" href="http://en.wikipedia.org/wiki/Lexicographical_order" style="margin:0px; padding:0px; color:black">lexicographical&#13;
 order</a>)来排列。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果你需要成员按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递减(从大到小)来排列，请使用<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/sorted_set.html#zrevrange" style="margin:0px; padding:0px; color:black">ZREVRANGE</a>命令。</p>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">下标参数<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>都以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为底，也就是说，以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>表示有序集第一个成员，以<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>表示有序集第二个成员，以此类推。</div>&#13;
<div class="line" style="margin:0px; padding:0px">你也可以使用负数下标，以<tt class="docutils literal" style="margin:0px; padding:0px">-1</tt>表示最后一个成员，<tt class="docutils literal" style="margin:0px; padding:0px">-2</tt>表示倒数第二个成员，以此类推。</div>&#13;
</div>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">超出范围的下标并不会引起错误。</div>&#13;
<div class="line" style="margin:0px; padding:0px">比如说，当<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>的值比有序集的最大下标还要大，或是<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">start</span> <span class="pre" style="margin:0px; padding:0px">&gt;</span> <span class="pre" style="margin:0px; padding:0px">stop</span></tt>时，<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/sorted_set.html#zrange" style="margin:0px; padding:0px; color:black">ZRANGE</a>命令只是简单地返回一个空列表。</div>&#13;
<div class="line" style="margin:0px; padding:0px">另一方面，假如<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>参数的值比有序集的最大下标还要大，那么Redis将<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>当作最大下标来处理。</div>&#13;
</div>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">可以通过使用<tt class="docutils literal" style="margin:0px; padding:0px">WITHSCORES</tt>选项，来让成员和它的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值一并返回，返回列表以<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">value1,score1,</span> <span class="pre" style="margin:0px; padding:0px">...,</span> <span class="pre" style="margin:0px; padding:0px">valueN,scoreN</span></tt>的格式表示。</div>&#13;
<div class="line" style="margin:0px; padding:0px">客户端库可能会返回一些更复杂的数据类型，比如数组、元组等。</div>&#13;
</div>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N)+M)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为有序集的基数，而<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为结果集的基数。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">指定区间内，带有<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值(可选)的有序集成员的列表。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZREVRANGE" style="margin:0px; padding:0px"/>ZREVRANGE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZREVRANGE key start stop [WITHSCORES]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，指定区间内的成员。</p>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">其中成员的位置按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递减(从大到小)来排列。</div>&#13;
<div class="line" style="margin:0px; padding:0px">具有相同<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值的成员按字典序的反序(<a target="_blank" class="reference external" href="http://en.wikipedia.org/wiki/Lexicographical_order#Reverse_lexicographic_order" style="margin:0px; padding:0px; color:black">reverse&#13;
 lexicographical order</a>)排列。</div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">除了成员按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递减的次序排列这一点外，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREVRANGE" style="margin:0px; padding:0px; color:black">ZREVRANGE</a>命令的其他方面和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZRANGE" style="margin:0px; padding:0px; color:black">ZRANGE</a>命令一样。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N)+M)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为有序集的基数，而<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为结果集的基数。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">指定区间内，带有<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值(可选)的有序集成员的列表。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZRANGEBYSCORE" style="margin:0px; padding:0px"/>ZRANGEBYSCORE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，所有<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值介于<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>之间(包括等于<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>或<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>)的成员。有序集成员按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递增(从小到大)次序排列。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">具有相同<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值的成员按字典序(<a target="_blank" class="reference external" href="http://en.wikipedia.org/wiki/Lexicographical_order" style="margin:0px; padding:0px; color:black">lexicographical&#13;
 order</a>)来排列(该属性是有序集提供的，不需要额外的计算)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">可选的<tt class="docutils literal" style="margin:0px; padding:0px">LIMIT</tt>参数指定返回结果的数量及区间(就像SQL中的<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SELECT</span> <span class="pre" style="margin:0px; padding:0px">LIMIT</span> <span class="pre" style="margin:0px; padding:0px">offset,</span> <span class="pre" style="margin:0px; padding:0px">count</span></tt>)，注意当<tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>很大时，定位<tt class="docutils literal" style="margin:0px; padding:0px">offset</tt>的操作可能需要遍历整个有序集，此过程最坏复杂度为O(N)时间。</p>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">可选的<tt class="docutils literal" style="margin:0px; padding:0px">WITHSCORES</tt>参数决定结果集是单单返回有序集的成员，还是将有序集成员及其<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值一起返回。</div>&#13;
<div class="line" style="margin:0px; padding:0px">该选项自Redis 2.0版本起可用。</div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">区间及无限</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px">min</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>可以是<tt class="docutils literal" style="margin:0px; padding:0px">-inf</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">+inf</tt>，这样一来，你就可以在不知道有序集的最低和最高<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值的情况下，使用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZRANGEBYSCORE" style="margin:0px; padding:0px; color:black">ZRANGEBYSCORE</a>这类命令。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">默认情况下，区间的取值使用<a target="_blank" class="reference external" href="http://zh.wikipedia.org/wiki/%E5%8D%80%E9%96%93" style="margin:0px; padding:0px; color:black">闭区间</a>(小于等于或大于等于)，你也可以通过给参数前增加<tt class="docutils literal" style="margin:0px; padding:0px">(</tt>符号来使用可选的<a target="_blank" class="reference external" href="http://zh.wikipedia.org/wiki/%E5%8D%80%E9%96%93" style="margin:0px; padding:0px; color:black">开区间</a>(小于或大于)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">举个例子：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回所有符合条件<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">1</span> <span class="pre" style="margin:0px; padding:0px">&lt;</span> <span class="pre" style="margin:0px; padding:0px">score</span> <span class="pre" style="margin:0px; padding:0px">&lt;=</span> <span class="pre" style="margin:0px; padding:0px">5</span></tt>的成员；</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回所有符合条件<tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">5</span> <span class="pre" style="margin:0px; padding:0px">&lt;</span> <span class="pre" style="margin:0px; padding:0px">score</span> <span class="pre" style="margin:0px; padding:0px">&lt;</span> <span class="pre" style="margin:0px; padding:0px">10</span></tt>的成员。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N)+M)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为有序集的基数，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为被结果集的基数。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">指定区间内，带有<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值(可选)的有序集成员的列表。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZREVRANGEBYSCORE" style="margin:0px; padding:0px"/>ZREVRANGEBYSCORE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZREVRANGEBYSCORE key max min [WITHSCORES] [LIMIT offset count]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值介于<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>之间(默认包括等于<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>或<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>)的所有的成员。有序集成员按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递减(从大到小)的次序排列。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">具有相同<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值的成员按字典序的反序(<a target="_blank" class="reference external" href="http://en.wikipedia.org/wiki/Lexicographical_order#Reverse_lexicographic_order" style="margin:0px; padding:0px; color:black">reverse&#13;
 lexicographical order</a>)排列。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">除了成员按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递减的次序排列这一点外，<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREVRANGEBYSCORE" style="margin:0px; padding:0px; color:black">ZREVRANGEBYSCORE</a>命令的其他方面和<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZRANGEBYSCORE" style="margin:0px; padding:0px; color:black">ZRANGEBYSCORE</a>命令一样。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N)+M)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为有序集的基数，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为结果集的基数。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">指定区间内，带有<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值(可选)的有序集成员的列表。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZRANK" style="margin:0px; padding:0px"/>ZRANK</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZRANK key member</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中成员<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>的排名。其中有序集成员按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递增(从小到大)顺序排列。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">排名以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为底，也就是说，<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值最小的成员排名为<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZREVRANK" style="margin:0px; padding:0px; color:black">ZREVRANK</a>命令可以获得成员按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递减(从大到小)排列的排名。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N))</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>是有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的成员，返回<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>的排名。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>不是有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的成员，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZREVRANK" style="margin:0px; padding:0px"/>ZREVRANK</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZREVRANK key member</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中成员<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>的排名。其中有序集成员按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递减(从大到小)排序。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">排名以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为底，也就是说，<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值最大的成员排名为<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZRANK" style="margin:0px; padding:0px; color:black">ZRANK</a>命令可以获得成员按<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值递增(从小到大)排列的排名。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N))</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>是有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的成员，返回<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>的排名。</div>&#13;
<div class="line" style="margin:0px; padding:0px">如果<tt class="docutils literal" style="margin:0px; padding:0px">member</tt>不是有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的成员，返回<tt class="docutils literal" style="margin:0px; padding:0px">nil</tt>。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZREMRANGEBYRANK" style="margin:0px; padding:0px"/>ZREMRANGEBYRANK</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZREMRANGEBYRANK key start stop</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">移除有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，指定排名(rank)区间内的所有成员。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">区间分别以下标参数<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>指出，包含<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>在内。</p>&#13;
<div class="line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">下标参数<tt class="docutils literal" style="margin:0px; padding:0px">start</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">stop</tt>都以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>为底，也就是说，以<tt class="docutils literal" style="margin:0px; padding:0px">0</tt>表示有序集第一个成员，以<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>表示有序集第二个成员，以此类推。</div>&#13;
<div class="line" style="margin:0px; padding:0px">你也可以使用负数下标，以<tt class="docutils literal" style="margin:0px; padding:0px">-1</tt>表示最后一个成员，<tt class="docutils literal" style="margin:0px; padding:0px">-2</tt>表示倒数第二个成员，以此类推。</div>&#13;
</div>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N)+M)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为有序集的基数，而<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为被移除成员的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">被移除成员的数量。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZREMRANGEBYSCORE" style="margin:0px; padding:0px"/>ZREMRANGEBYSCORE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZREMRANGEBYSCORE key min max</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">移除有序集<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中，所有<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值介于<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>之间(包括等于<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>或<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>)的成员。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">自版本2.1.6开始，<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值等于<tt class="docutils literal" style="margin:0px; padding:0px">min</tt>或<tt class="docutils literal" style="margin:0px; padding:0px">max</tt>的成员也可以不包括在内，详情请参见<a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#z_ZRANGEBYSCORE" style="margin:0px; padding:0px; color:black">ZRANGEBYSCORE</a>命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(log(N)+M)，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为有序集的基数，而<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为被移除成员的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">被移除成员的数量。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZINTERSTORE" style="margin:0px; padding:0px"/>ZINTERSTORE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE SUM|MIN|MAX]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">计算给定的一个或多个有序集的交集，其中给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的数量必须以<tt class="docutils literal" style="margin:0px; padding:0px">numkeys</tt>参数指定，并将该交集(结果集)储存到<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">默认情况下，结果集中某个成员的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值是所有给定集下该成员<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值之<span style="margin:0px; padding:0px">和</span>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">关于<tt class="docutils literal" style="margin:0px; padding:0px">WEIGHTS</tt>和<tt class="docutils literal" style="margin:0px; padding:0px">AGGREGATE</tt>选项的描述，参见<a target="_blank" class="reference internal" href="http://readthedocs.org/docs/redis/en/latest/sorted_set.html#zunionstore" style="margin:0px; padding:0px; color:black">ZUNIONSTORE</a>命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N*K)+O(M*log(M))，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>中基数最小的有序集，<tt class="docutils literal" style="margin:0px; padding:0px">K</tt>为给定有序集的数量，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为结果集的基数。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">保存到<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>的结果集的基数。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="z_ZUNIONSTORE" style="margin:0px; padding:0px"/>ZUNIONSTORE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ZUNIONSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE SUM|MIN|MAX]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">计算给定的一个或多个有序集的并集，其中给定<tt class="docutils literal" style="margin:0px; padding:0px">key</tt>的数量必须以<tt class="docutils literal" style="margin:0px; padding:0px">numkeys</tt>参数指定，并将该并集(结果集)储存到<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">默认情况下，结果集中某个成员的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值是所有给定集下该成员<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值之<span style="margin:0px; padding:0px">和</span>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">WEIGHTS</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用<tt class="docutils literal" style="margin:0px; padding:0px">WEIGHTS</tt>选项，你可以为<span style="margin:0px; padding:0px">每个</span>给定有序集<span style="margin:0px; padding:0px">分别</span>指定一个乘法因子(multiplication&#13;
 factor)，每个给定有序集的所有成员的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值在传递给聚合函数(aggregation function)之前都要先乘以该有序集的因子。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果没有指定<tt class="docutils literal" style="margin:0px; padding:0px">WEIGHTS</tt>选项，乘法因子默认设置为<tt class="docutils literal" style="margin:0px; padding:0px">1</tt>。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">AGGREGATE</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用<tt class="docutils literal" style="margin:0px; padding:0px">AGGREGATE</tt>选项，你可以指定并集的结果集的聚合方式。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">默认使用的参数<tt class="docutils literal" style="margin:0px; padding:0px">SUM</tt>，可以将所有集合中某个成员的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值之<span style="margin:0px; padding:0px">和</span>作为结果集中该成员的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值；使用参数<tt class="docutils literal" style="margin:0px; padding:0px">MIN</tt>，可以将所有集合中某个成员的<span style="margin:0px; padding:0px">最小</span><tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值作为结果集中该成员的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值；而参数<tt class="docutils literal" style="margin:0px; padding:0px">MAX</tt>则是将所有集合中某个成员的<span style="margin:0px; padding:0px">最大</span><tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值作为结果集中该成员的<tt class="docutils literal" style="margin:0px; padding:0px">score</tt>值。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度:</span></dt><dd style="margin:0px; padding:0px">O(N)+O(M log(M))，<tt class="docutils literal" style="margin:0px; padding:0px">N</tt>为给定有序集基数的总和，<tt class="docutils literal" style="margin:0px; padding:0px">M</tt>为结果集的基数。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值:</span></dt><dd style="margin:0px; padding:0px">保存到<tt class="docutils literal" style="margin:0px; padding:0px">destination</tt>的结果集的基数。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h1 style="margin:0px; padding:0px; font-size:28px"><a target="_blank" name="pub_sub" style="margin:0px; padding:0px"/>发布/订阅(Pub/Sub)</h1>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="ps_PUBLISH" style="margin:0px; padding:0px"/>PUBLISH</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">PUBLISH channel message</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">将信息 <tt class="docutils literal" style="margin:0px; padding:0px">message</tt> 发送到指定的频道 <tt class="docutils literal" style="margin:0px; padding:0px">channel</tt> 。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N+M)，其中 <tt class="docutils literal" style="margin:0px; padding:0px">N</tt> 是频道 <tt class="docutils literal" style="margin:0px; padding:0px">channel</tt> 的订阅者数量，而 <tt class="docutils literal" style="margin:0px; padding:0px">M</tt> 则是使用模式订阅(subscribed&#13;
 patterns)的客户端的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">接收到信息 <tt class="docutils literal" style="margin:0px; padding:0px">message</tt> 的订阅者数量。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="ps_SUBSCRIBE" style="margin:0px; padding:0px"/>SUBSCRIBE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SUBSCRIBE channel [channel ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">订阅给定频道的信息。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)，其中 <tt class="docutils literal" style="margin:0px; padding:0px">N</tt> 是订阅的频道的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">接收到的信息(请参见下面的代码说明)。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="ps_PSUBSCRIBE" style="margin:0px; padding:0px"/>PSUBSCRIBE</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">PSUBSCRIBE pattern [pattern ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">订阅符合给定模式的频道。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">每个模式以 <tt class="docutils literal" style="margin:0px; padding:0px">*</tt> 作为匹配符，比如 <tt class="docutils literal" style="margin:0px; padding:0px">huangz*</tt> 匹配所有以 <tt class="docutils literal" style="margin:0px; padding:0px">huangz</tt> 开头的频道( <tt class="docutils literal" style="margin:0px; padding:0px">huangzmsg</tt> 、 <tt class="docutils literal" style="margin:0px; padding:0px">huangz-blog</tt> 、 <tt class="docutils literal" style="margin:0px; padding:0px">huangz.tweets</tt> 等等)， <tt class="docutils literal" style="margin:0px; padding:0px">news.*</tt> 匹配所有以 <tt class="docutils literal" style="margin:0px; padding:0px">news.</tt> 开头的频道(<tt class="docutils literal" style="margin:0px; padding:0px">news.it</tt> 、 <tt class="docutils literal" style="margin:0px; padding:0px">news.global.today</tt> 等等)，诸如此类。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)， <tt class="docutils literal" style="margin:0px; padding:0px">N</tt> 是订阅的模式的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">接收到的信息(请参见下面的代码说明)。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="ps_UNSUBSCRIBE" style="margin:0px; padding:0px"/>UNSUBSCRIBE</h2>&#13;
<blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
<span style="margin:0px; padding:0px; color:rgb(255,0,0)"><span style="margin:0px; padding:0px">警告:此命令在新版 Redis 中似乎已经被废弃？</span></span></p>&#13;
</blockquote>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="ps_PUNSUBSCRIBE" style="margin:0px; padding:0px"/>PUNSUBSCRIBE</h2>&#13;
<blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><span style="margin:0px; padding:0px">警告:此命令在新版 Redis 中似乎已经被废弃？</span></span></p>&#13;
</blockquote>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h1 style="margin:0px; padding:0px; font-size:28px"><a target="_blank" name="Transaction" style="margin:0px; padding:0px"/>事务(Transaction)</h1>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="t_WATCH" style="margin:0px; padding:0px"/>WATCH</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ATCH key [key ...]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">监视一个(或多个) key ，如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="t_UNWATCH" style="margin:0px; padding:0px"/>UNWATCH</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">UNWATCH</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">取消 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_WATCH" style="margin:0px; padding:0px; color:black">WATCH</a> 命令对所有&#13;
 key 的监视。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果在执行 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_WATCH" style="margin:0px; padding:0px; color:black">WATCH</a> 命令之后， <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_EXEC" style="margin:0px; padding:0px; color:black">EXEC</a> 命令或 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_DISCARD" style="margin:0px; padding:0px; color:black">DISCARD</a> 命令先被执行了的话，那么就不需要再执行 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_UNWATCH" style="margin:0px; padding:0px; color:black">UNWATCH</a> 了。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">因为 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_EXEC" style="margin:0px; padding:0px; color:black">EXEC</a> 命令会执行事务，因此 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_WATCH" style="margin:0px; padding:0px; color:black">WATCH</a> 命令的效果已经产生了；而 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_DISCARD" style="margin:0px; padding:0px; color:black">DISCARD</a> 命令在取消事务的同时也会取消所有对&#13;
 key 的监视，因此这两个命令执行之后，就没有必要执行 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_UNWATCH" style="margin:0px; padding:0px; color:black">UNWATCH</a> 了。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="t_MULTI" style="margin:0px; padding:0px"/>MULTI</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">MULTI</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">标记一个事务块的开始。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">事务块内的多条命令会按照先后顺序被放进一个队列当中，最后由 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_EXEC" style="margin:0px; padding:0px; color:black">EXEC</a> 命令在一个原子时间内执行。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="t_EXEC" style="margin:0px; padding:0px"/>EXEC</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">EXEC</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">执行所有事务块内的命令。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">假如某个(或某些) key 正处于 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_WATCH" style="margin:0px; padding:0px; color:black">WATCH</a> 命令的监视之下，且事务块中有和这个(或这些)&#13;
 key 相关的命令，那么 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_EXEC" style="margin:0px; padding:0px; color:black">EXEC</a> 命令只在这个(或这些) key 没有被其他命令所改动的情况下执行并生效，否则该事务被打断(abort)。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">事务块内所有命令的时间复杂度的总和。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">事务块内所有命令的返回值，按命令执行的先后顺序排列。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当操作被打断时，返回空值 <tt class="docutils literal" style="margin:0px; padding:0px">nil</tt> 。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="t_DISCARD" style="margin:0px; padding:0px"/>DISCARD</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">DISCARD</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">取消事务，放弃执行事务块内的所有命令。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果正在使用 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_WATCH" style="margin:0px; padding:0px; color:black">WATCH</a> 命令监视某个(或某些)&#13;
 key ，那么取消所有监视，等同于执行命令 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#t_UNWATCH" style="margin:0px; padding:0px; color:black">UNWATCH</a> 。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h1 style="margin:0px; padding:0px; font-size:28px"><a target="_blank" name="Connection" style="margin:0px; padding:0px"/>连接(Connection)</h1>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="conn_AUTH" style="margin:0px; padding:0px"/>AUTH</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">AUTH password</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">通过设置配置文件中 <tt class="docutils literal" style="margin:0px; padding:0px">requirepass</tt> 项的值(使用命令 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span> <span class="pre" style="margin:0px; padding:0px">requirepass</span> <span class="pre" style="margin:0px; padding:0px">password</span></tt> )，可以使用密码来保护&#13;
 Redis 服务器。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果开启了密码保护的话，在每次连接 Redis 服务器之后，就要使用 <tt class="docutils literal" style="margin:0px; padding:0px">AUTH</tt> 命令解锁，解锁之后才能使用其他 Redis 命令。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果 <tt class="docutils literal" style="margin:0px; padding:0px">AUTH</tt> 命令给定的密码 <tt class="docutils literal" style="margin:0px; padding:0px">password</tt> 和配置文件中的密码相符的话，服务器会返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 并开始接受命令输入。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">反之，如果密码不匹配的话，服务器将返回一个错误，并要求客户端需重新输入密码。</p>&#13;
<div class="admonition warning" style="margin:0px; padding:0px">&#13;
<p class="first admonition-title" style="margin:10px auto; padding-top:0px; padding-bottom:0px">&#13;
</p>&#13;
<pre code_snippet_id="1697934" snippet_file_name="blog_20160527_2_1948960" name="code" class="php">$redis-&gt;auth('foobared');</pre>&#13;
<p/>&#13;
<blockquote style="margin:10px 0px; padding:5px 10px; border:2px solid rgb(239,239,239); line-height:1.6; color:rgb(51,51,51); background:none">&#13;
<p class="last" style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px; color:rgb(255,0,0)"><span style="margin:0px; padding:0px">警告:</span>因为 Redis 高性能的特点，在很短时间内尝试猜测非常多个密码是有可能的，因此请确保使用的密码足够复杂和足够长，以免遭受密码猜测攻击。</span></p>&#13;
</blockquote>&#13;
</div>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">密码匹配时返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> ，否则返回一个错误。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="conn_PING" style="margin:0px; padding:0px"/>PING</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">PING</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">客户端向服务器发送一个 <tt class="docutils literal" style="margin:0px; padding:0px">PING</tt> ，然后服务器返回客户端一个 <tt class="docutils literal" style="margin:0px; padding:0px">PONG</tt> 。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">通常用于测试与服务器的连接是否仍然生效，或者用于测量延迟值。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">PONG</tt></dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="conn_SELECT" style="margin:0px; padding:0px"/>SELECT</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SELECT index</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">切换到指定的数据库，数据库索引号用数字值指定，以 <tt class="docutils literal" style="margin:0px; padding:0px">0</tt> 作为起始索引值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">新的链接总是使用 <tt class="docutils literal" style="margin:0px; padding:0px">0</tt> 号数据库。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">OK</tt></dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"/>&#13;
<pre code_snippet_id="1697934" snippet_file_name="blog_20160527_3_5154543" name="code" class="php">$redis-&gt;select(1); // switch to DB 1</pre>&#13;
<p/>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="conn_ECHO" style="margin:0px; padding:0px"/>ECHO</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">ECHO message</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">打印一个特定的信息 <tt class="docutils literal" style="margin:0px; padding:0px">message</tt> ，测试时使用。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">message</tt> 自身。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="conn_QUIT" style="margin:0px; padding:0px"/>QUIT</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">QUIT</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">请求服务器关闭与当前客户端的连接。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">一旦所有等待中的回复(如果有的话)顺利写入到客户端，连接就会被关闭。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> (但是不会被打印显示，因为当时 Redis-cli 已经退出)。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h1 style="margin:0px; padding:0px; font-size:28px"><a target="_blank" name="Server" style="margin:0px; padding:0px"/>服务器(Server)</h1>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_BGREWRITEAOF" style="margin:0px; padding:0px"/>BGREWRITEAOF</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">BGREWRITEAOF</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">异步(Asynchronously)重写 AOF 文件以反应当前数据库的状态。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">即使 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_BGREWRITEAOF" style="margin:0px; padding:0px; color:black">BGREWRITEAOF</a> 命令执行失败，旧&#13;
 AOF 文件中的数据也不会因此丢失或改变。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)， <tt class="docutils literal" style="margin:0px; padding:0px">N</tt> 为要追加到 AOF 文件中的数据数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">反馈信息。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_BGSAVE" style="margin:0px; padding:0px"/>BGSAVE</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">在后台异步保存当前数据库的数据到磁盘。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_BGSAVE" style="margin:0px; padding:0px; color:black">BGSAVE</a> 命令执行之后立即返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> ，然后&#13;
 Redis fork出一个新子进程，原来的 Redis 进程(父进程)继续处理客户端请求，而子进程则负责将数据保存到磁盘，然后退出。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">客户端可以通过 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_LASTSAVE" style="margin:0px; padding:0px; color:black">LASTSAVE</a> 命令查看相关信息，判断 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_BGSAVE" style="margin:0px; padding:0px; color:black">BGSAVE</a> 命令是否执行成功。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)， <tt class="docutils literal" style="margin:0px; padding:0px">N</tt> 为要保存到数据库中的 key 的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">反馈信息。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_SAVE" style="margin:0px; padding:0px"/>SAVE</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">SAVE</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">同步保存当前数据库的数据到磁盘。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(N)， <tt class="docutils literal" style="margin:0px; padding:0px">N</tt> 为要保存到数据库中的 key 的数量。</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_LASTSAVE" style="margin:0px; padding:0px"/>LASTSAVE</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">LASTSAVE</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回最近一次 Redis 成功执行保存操作的时间点( <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SAVE" style="margin:0px; padding:0px; color:black">SAVE</a> 、 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_BGSAVE" style="margin:0px; padding:0px; color:black">BGSAVE</a> 等)，以&#13;
 UNIX 时间戳格式表示。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">一个 UNIX 时间戳。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_DBSIZE" style="margin:0px; padding:0px"/>DBSIZE</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">DBSIZE</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回当前数据库的 key 的数量。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">当前数据库的 key 的数量。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_SLAVEOF" style="margin:0px; padding:0px"/>SLAVEOF</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SLAVEOF host port</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SLAVEOF" style="margin:0px; padding:0px; color:black">SLAVEOF</a> 命令用于在&#13;
 Redis 运行时动态地修改复制(replication)功能的行为。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">通过执行 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLAVEOF</span> <span class="pre" style="margin:0px; padding:0px">host</span> <span class="pre" style="margin:0px; padding:0px">port</span></tt> 命令，可以将当前服务器转变为指定服务器的从属服务器(slave&#13;
 server)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果当前服务器已经是某个主服务器(master server)的从属服务器，那么执行 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLAVEOF</span> <span class="pre" style="margin:0px; padding:0px">host</span> <span class="pre" style="margin:0px; padding:0px">port</span></tt> 将使当前服务器停止对旧主服务器的同步，丢弃旧数据集，转而开始对新主服务器进行同步。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">另外，对一个从属服务器执行命令 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLAVEOF</span> <span class="pre" style="margin:0px; padding:0px">NO</span> <span class="pre" style="margin:0px; padding:0px">ONE</span></tt> 将使得这个从属服务器关闭复制功能，并从从属服务器转变回主服务器，原来同步所得的数据集<span style="margin:0px; padding:0px">不会</span>被丢弃。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">利用“ <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLAVEOF</span> <span class="pre" style="margin:0px; padding:0px">NO</span> <span class="pre" style="margin:0px; padding:0px">ONE</span></tt> 不会丢弃同步所得数据集”这个特性，可以在主服务器失败的时候，将从属服务器用作新的主服务器，从而实现无间断运行。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLAVEOF</span> <span class="pre" style="margin:0px; padding:0px">host</span> <span class="pre" style="margin:0px; padding:0px">port</span></tt> ，O(N)， <tt class="docutils literal" style="margin:0px; padding:0px">N</tt> 为要同步的数据数量。</div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLAVEOF</span> <span class="pre" style="margin:0px; padding:0px">NO</span> <span class="pre" style="margin:0px; padding:0px">ONE</span></tt> ，&#13;
 O(1) 。</div>&#13;
</div>&#13;
</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_FLUSHALL" style="margin:0px; padding:0px"/>FLUSHALL</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">FLUSHALL</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">清空整个 Redis 服务器的数据(删除<span style="margin:0px; padding:0px">所有数据库的所有 key</span>)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">此命令从不失败。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">尚未明确</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_FLUSHDB" style="margin:0px; padding:0px"/>FLUSHDB</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">FLUSHDB</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">清空<span style="margin:0px; padding:0px">当前</span>数据库中的所有 key 。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">此命令从不失败。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_SHUTDOWN" style="margin:0px; padding:0px"/>SHUTDOWN</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">SHUTDOWN</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SHUTDOWN" style="margin:0px; padding:0px; color:black">SHUTDOWN</a> 命令执行以下操作：</p>&#13;
<ul class="simple" style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc">停止所有客户端</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">如果有最少一个保存点在等待，执行 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SAVE" style="margin:0px; padding:0px; color:black">SAVE</a> 命令</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">如果 AOF 选项被打开，更新 AOF 文件</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">服务器关闭</li></ul><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果持久化被打开的话， <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SHUTDOWN" style="margin:0px; padding:0px; color:black">SHUTDOWN</a> 命令会保证服务器正常关闭而<span style="margin:0px; padding:0px">不</span>丢失任何数据。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">假如只是单纯地执行 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SAVE" style="margin:0px; padding:0px; color:black">SAVE</a> 命令，然后再执行 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#conn_QUIT" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">QUIT</span></a> 命令，则没有这一保证&#13;
 —— 因为在执行 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_SAVE" style="margin:0px; padding:0px; color:black">SAVE</a> 之后、执行 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#conn_QUIT" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">QUIT</span></a> 之前的这段时间中间，其他客户端可能正在和服务器进行通讯，这时如果执行 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#conn_QUIT" style="margin:0px; padding:0px; color:black"><span style="margin:0px; padding:0px">QUIT</span></a> 就会造成数据丢失。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">不明确</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">执行失败时返回错误。</div>&#13;
<div class="line" style="margin:0px; padding:0px">执行成功时不返回任何信息，服务器和客户端的连接断开，客户端自动退出。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_SLOWLOG" style="margin:0px; padding:0px"/>SLOWLOG</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">SLOWLOG subcommand [argument]</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">什么是 SLOWLOG</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">Slow log 是 Redis 用来记录查询执行时间的日志系统。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">查询执行时间指的是不包括像客户端响应(talking)、发送回复等 IO 操作，而单单是执行一个查询命令所耗费的时间。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">另外，slow log 保存在内存里面，读写速度非常快，因此你可以放心地使用它，不必担心因为开启 slow log 而损害 Redis 的速度。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">设置 SLOWLOG</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">Slow log 的行为由两个配置参数(configuration parameter)指定，可以通过改写 redis.conf 文件或者用 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span></tt> 和 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span></tt> 命令对它们动态地进行修改。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">第一个选项是 <tt class="docutils literal" style="margin:0px; padding:0px">slowlog-log-slower-then</tt> ，它决定要对执行时间大于多少微秒(microsecond，1秒 = 1,000,000 微秒)的查询进行记录。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">比如执行以下命令将让 slow log 记录所有查询时间大于等于 100 微秒的查询：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span> <span class="pre" style="margin:0px; padding:0px">slowlog-log-slower-then</span> <span class="pre" style="margin:0px; padding:0px">100</span></tt> ，</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">而以下命令记录所有查询时间大于 1000 微秒的查询：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span> <span class="pre" style="margin:0px; padding:0px">slowlog-log-slower-then</span> <span class="pre" style="margin:0px; padding:0px">1000</span></tt> 。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">另一个选项是 <tt class="docutils literal" style="margin:0px; padding:0px">slowlog-max-len</tt> ，它决定 slow log <span style="margin:0px; padding:0px">最多</span>能保存多少条日志， slow log 本身是一个 LIFO 队列，当队列大小超过 <tt class="docutils literal" style="margin:0px; padding:0px">slowlog-max-len</tt> 时，最旧的一条日志将被删除，而最新的一条日志加入到&#13;
 slow log ，以此类推。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">以下命令让 slow log 最多保存 1000 条日志：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span> <span class="pre" style="margin:0px; padding:0px">slowlog-max-len</span> <span class="pre" style="margin:0px; padding:0px">1000</span></tt> 。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span></tt> 命令可以查询两个选项的当前值：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">查看 slow log</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">要查看 slow log ，可以使用 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLOWLOG</span> <span class="pre" style="margin:0px; padding:0px">GET</span></tt> 或者 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLOWLOG</span> <span class="pre" style="margin:0px; padding:0px">GET</span> <span class="pre" style="margin:0px; padding:0px">number</span></tt> 命令，前者打印所有&#13;
 slow log ，最大长度取决于 <tt class="docutils literal" style="margin:0px; padding:0px">slowlog-max-len</tt> 选项的值，而 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLOWLOG</span> <span class="pre" style="margin:0px; padding:0px">GET</span> <span class="pre" style="margin:0px; padding:0px">number</span></tt> 则只打印指定数量的日志。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">最新的日志会最先被打印：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">日志的唯一 id 只有在 Redis 服务器重启的时候才会重置，这样可以避免对日志的重复处理(比如你可能会想在每次发现新的慢查询时发邮件通知你)。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">查看当前日志的数量</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用命令 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLOWLOG</span> <span class="pre" style="margin:0px; padding:0px">LEN</span></tt> 可以查看当前日志的数量。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">请注意这个值和 <tt class="docutils literal" style="margin:0px; padding:0px">slower-max-len</tt> 的区别，它们一个是当前日志的数量，一个是允许记录的最大日志的数量。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">清空日志</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用命令 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">SLOWLOG</span> <span class="pre" style="margin:0px; padding:0px">RESET</span></tt> 可以清空&#13;
 slow log 。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">时间复杂度：</span>O(1)</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">返回值：</span>取决于不同命令，返回不同的值。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_INFO" style="margin:0px; padding:0px"/>INFO</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">INFO</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回关于 Redis 服务器的各种信息和统计值。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">具体请参见下面的测试代码。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_CONFIG-GET" style="margin:0px; padding:0px"/>CONFIG GET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">CONFIG GET parameter</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_CONFIG-GET" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 GET</a> 命令用于取得运行中的 Redis 服务器的配置参数(configuration parameters)，不过并非所有配置参数都被 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span></tt> 命令所支持。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_CONFIG-GET" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 GET</a> 接受单个参数 <tt class="docutils literal" style="margin:0px; padding:0px">parameter</tt> 作为搜索关键字，查找所有匹配的配置参数，其中参数和值以“键-值对”(key-value pairs)的方式排列。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">比如执行 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span> <span class="pre" style="margin:0px; padding:0px">s*</span></tt> 命令，服务器就会返回所有以 <tt class="docutils literal" style="margin:0px; padding:0px">s</tt> 开头的配置参数及参数的值：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">如果你只是寻找特定的某个参数的话，你当然也可以直接指定参数的名字：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">使用命令 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span> <span class="pre" style="margin:0px; padding:0px">*</span></tt> ，可以列出 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span></tt> 命令支持的所有参数：</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">所有被 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span></tt> 所支持的配置参数都可以在配置文件&#13;
 redis.conf 中找到，不过 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span></tt> 和 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span></tt> 使用的格式和&#13;
 redis.conf 文件所使用的格式有以下两点不同：</p>&#13;
<ul style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc">&#13;
<div class="first line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">10kb</tt> 、 <tt class="docutils literal" style="margin:0px; padding:0px">2gb</tt> 这些在配置文件中所使用的储存单位缩写，不可以用在 <tt class="docutils literal" style="margin:0px; padding:0px">CONFIG</tt> 命令中， <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span></tt> 的值只能通过数字值显式地设定。</div>&#13;
<div class="line" style="margin:0px; padding:0px"> </div>&#13;
<div class="line" style="margin:0px; padding:0px">像 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span> <span class="pre" style="margin:0px; padding:0px">xxx</span> <span class="pre" style="margin:0px; padding:0px">1k</span></tt> 这样的命令是错误的，正确的格式是 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">SET</span> <span class="pre" style="margin:0px; padding:0px">xxx</span> <span class="pre" style="margin:0px; padding:0px">1000</span></tt> 。</div>&#13;
</div>&#13;
</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">&#13;
<div class="first line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px">save</tt> 选项在 redis.conf 中是用多行文字储存的，但在 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span></tt> 命令中，它只打印一行文字。</div>&#13;
<div class="line" style="margin:0px; padding:0px"> </div>&#13;
<div class="line" style="margin:0px; padding:0px">以下是 <tt class="docutils literal" style="margin:0px; padding:0px">save</tt> 选项在 redis.conf 文件中的表示：</div>&#13;
<div class="line" style="margin:0px; padding:0px"> </div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">save</span> <span class="pre" style="margin:0px; padding:0px">900</span> <span class="pre" style="margin:0px; padding:0px">1</span></tt></div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">save</span> <span class="pre" style="margin:0px; padding:0px">300</span> <span class="pre" style="margin:0px; padding:0px">10</span></tt></div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">save</span> <span class="pre" style="margin:0px; padding:0px">60</span> <span class="pre" style="margin:0px; padding:0px">10000</span></tt></div>&#13;
<div class="line" style="margin:0px; padding:0px"> </div>&#13;
<div class="line" style="margin:0px; padding:0px">但是 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span></tt> 命令的输出只有一行：</div>&#13;
<div class="line" style="margin:0px; padding:0px"> </div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">redis&gt;</span> <span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span> <span class="pre" style="margin:0px; padding:0px">save</span></tt></div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">1)</span> <span class="pre" style="margin:0px; padding:0px">"save"</span></tt></div>&#13;
<div class="line" style="margin:0px; padding:0px"><tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">2)</span> <span class="pre" style="margin:0px; padding:0px">"900</span> <span class="pre" style="margin:0px; padding:0px">1</span> <span class="pre" style="margin:0px; padding:0px">300</span> <span class="pre" style="margin:0px; padding:0px">10</span> <span class="pre" style="margin:0px; padding:0px">60</span> <span class="pre" style="margin:0px; padding:0px">10000"</span></tt></div>&#13;
<div class="line" style="margin:0px; padding:0px"> </div>&#13;
<div class="line" style="margin:0px; padding:0px">上面 <tt class="docutils literal" style="margin:0px; padding:0px">save</tt> 参数的三个值表示：在 900 秒内最少有 1 个 key 被改动，或者 300 秒内最少有 10 个 key 被改动，又或者 60 秒内最少有 1000 个 key 被改动，以上三个条件随便满足一个，就触发一次保存操作。</div>&#13;
</div>&#13;
</li></ul><dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">不明确</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">给定配置参数的值。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="scr_CONFIG-SET" style="margin:0px; padding:0px"/>CONFIG SET</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">CONFIG SET parameter value</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#scr_CONFIG-SET" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 SET</a> 命令可以动态地调整 Redis 服务器的配置(configuration)而无须重启。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">你可以使用它修改配置参数，或者改变 Redis 的持久化(Persistence)方式。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#scr_CONFIG-SET" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 SET</a> 可以修改的配置参数可以使用命令 <tt class="docutils literal" style="margin:0px; padding:0px"><span class="pre" style="margin:0px; padding:0px">CONFIG</span> <span class="pre" style="margin:0px; padding:0px">GET</span> <span class="pre" style="margin:0px; padding:0px">*</span></tt> 来列出，所有被 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#scr_CONFIG-SET" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 SET</a> 修改的配置参数都会立即生效。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">关于 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#scr_CONFIG-SET" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 SET</a> 命令的更多消息，请参见命令 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_CONFIG-GET" style="margin:0px; padding:0px; color:black">CONFIG GET</a> 的说明。</p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">关于如何使用 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#scr_CONFIG-SET" style="margin:0px; padding:0px; color:black">CONFIG&#13;
 SET</a> 命令修改 Redis 持久化方式，请参见 <a target="_blank" class="reference external" href="http://redis.io/topics/persistence" style="margin:0px; padding:0px; color:black">Redis Persistence</a> 。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">不明确</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">当设置成功时返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> ，否则返回一个错误。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="scr_CONFIG-RESETSTAT" style="margin:0px; padding:0px"/>CONFIG RESETSTAT</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">CONFIG RESETSTAT</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">重置 <a target="_blank" class="reference internal" href="http://www.cnblogs.com/ikodota/archive/2012/03/05/php_redis_cn.html#svr_INFO" style="margin:0px; padding:0px; color:black">INFO</a> 命令中的某些统计数据，包括：</p>&#13;
<ul class="simple" style="margin:0px 0px 0px 30px; padding:0px; word-break:break-all"><li style="margin:0px 0px 1em; padding:0px; list-style:disc">Keyspace hits (键空间命中次数)</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">Keyspace misses (键空间不命中次数)</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">Number of commands processed (执行命令的次数)</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">Number of connections received (连接服务器的次数)</li><li style="margin:0px 0px 1em; padding:0px; list-style:disc">Number of expired keys (过期key的数量)</li></ul><dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="scr_DEBUG-OBJECT" style="margin:0px; padding:0px"/>DEBUG OBJECT</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">DEBUG OBJECT key</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">返回给定 <tt class="docutils literal" style="margin:0px; padding:0px">key</tt> 的调试信息。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">O(1)</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">&#13;
<div class="first last line-block" style="margin:0px; padding:0px">&#13;
<div class="line" style="margin:0px; padding:0px">当 <tt class="docutils literal" style="margin:0px; padding:0px">key</tt> 存在时，返回有关信息。</div>&#13;
<div class="line" style="margin:0px; padding:0px">当 <tt class="docutils literal" style="margin:0px; padding:0px">key</tt> 不存在时，返回一个错误。</div>&#13;
</div>&#13;
</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_DEBUG-SEGFAULT" style="margin:0px; padding:0px"/>DEBUG SEGFAULT</h2>&#13;
<dl class="function" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<tt class="descname" style="margin:0px; padding:0px">DEBUG SEGFAULT</tt></dt><dd style="margin:0px; padding:0px"/></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px">令 Redis 服务器崩溃，调试用。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">不明确</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">无</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_MONITOR" style="margin:0px; padding:0px"/>MONITOR</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">MONITOR</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">实时打印出 Redis 服务器接收到的命令，调试用。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">不明确</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">总是返回 <tt class="docutils literal" style="margin:0px; padding:0px">OK</tt> 。</dd></dl><p style="margin:10px auto; padding-top:0px; padding-bottom:0px"> </p>&#13;
<h2 style="margin:15px auto 2px; padding:0px; font-size:21px"><a target="_blank" name="svr_SYNC" style="margin:0px; padding:0px"/>SYNC</h2>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px"><span style="margin:0px; padding:0px">YNC</span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px">用于复制功能(replication)的内部命令。</p>&#13;
<dl class="docutils" style="margin:0px; padding:0px"><dt style="margin:0px; padding:0px">&#13;
<span style="margin:0px; padding:0px">时间复杂度：</span></dt><dd style="margin:0px; padding:0px">不明确</dd><dt style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">返回值：</span></dt><dd style="margin:0px; padding:0px">不明确</dd></dl></div>&#13;
<br/><p><br/></p>&#13;
&#13;
                      </div>  </body>
            </html>