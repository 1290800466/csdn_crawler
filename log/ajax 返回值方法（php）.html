<!DOCTYPE html>
            <html>
              <head>
                <meta http-equiv="content-type" content="text/html; charset=utf-8">
                <meta http-equiv="X-UA-Compatible" content="IE=Edge">
                <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
                <meta name="apple-mobile-web-app-status-bar-style" content="black">

                <meta http-equiv="Cache-Control" content="no-siteapp" /><link rel="alternate" media="handheld" href="#" />

                <title></title>
              </head>
              <body><div class="skin_detail" id="article_content">&#13;
                        <div class="markdown_views"><pre class="prettyprint"><code class=" hljs php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">msg_error</span><span class="hljs-params">(<span class="hljs-variable">$state</span>, <span class="hljs-variable">$msg</span>)</span> {</span>
    <span class="hljs-keyword">if</span>(!<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">'callback'</span>])) {
        <span class="hljs-variable">$callback</span> = <span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">'callback'</span>];
        <span class="hljs-variable">$callback</span> = preg_replace(<span class="hljs-keyword">array</span>(<span class="hljs-string">'/&lt;/'</span>, <span class="hljs-string">'/&gt;/'</span>, <span class="hljs-string">'/"/'</span>, <span class="hljs-string">'/\'/'</span>,  <span class="hljs-string">'/\+/'</span>, <span class="hljs-string">'/\\\\/'</span>, <span class="hljs-string">'/\//'</span>), <span class="hljs-keyword">array</span>(<span class="hljs-string">'&amp;lt;'</span>, <span class="hljs-string">'&amp;gt;'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>), <span class="hljs-variable">$callback</span>);
    }
    <span class="hljs-variable">$a</span> = <span class="hljs-keyword">array</span>(
        <span class="hljs-string">'state'</span> =&gt; <span class="hljs-variable">$state</span>,
        <span class="hljs-string">'msg'</span> =&gt; <span class="hljs-variable">$msg</span>,
    );
    <span class="hljs-variable">$ret</span> = json_encode(<span class="hljs-variable">$a</span>);
    <span class="hljs-keyword">if</span>(!<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$callback</span>)) <span class="hljs-variable">$ret</span> = sprintf(<span class="hljs-string">"%s(%s)"</span>, <span class="hljs-variable">$callback</span>, <span class="hljs-variable">$ret</span>);
    header(<span class="hljs-string">"Content-type: application/json"</span>);
    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$ret</span>;
    <span class="hljs-keyword">exit</span>;
}</code></pre></div><link rel="stylesheet" href="http://static.blog.csdn.net/public/res-min/markdown_views.css?v=1.0"/></div>  </body>
            </html>